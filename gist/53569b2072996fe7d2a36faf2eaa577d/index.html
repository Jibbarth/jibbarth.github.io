<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
            <title>[Sylius] Restrict Payment Methods depending on customer group // Jib√© Barth</title>
                <meta name="author" content="Jib√© Barth">
        <meta name="description" content="It could be common to display some payment methods only to customers that belong to a group.
For example, you can add an offline payment method for you B2B customers, and invoice them at the end...
">
        <meta name="image" content="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop=entropy&amp;cs=srgb&amp;fm=jpg&amp;ixid=M3w2MzI5ODF8MHwxfHJhbmRvbXx8fHx8fHx8fDE3Njg5MTM5NzR8&amp;ixlib=rb-4.1.0&amp;q=85&amp;auto=format&amp;w=600&amp;h=400&amp;fit=crop&amp;crop=edges,entropy">
                <meta itemprop="name" content="[Sylius] Restrict Payment Methods depending on customer group // Jib√© Barth">
        <meta itemprop="description" content="It could be common to display some payment methods only to customers that belong to a group.
For example, you can add an offline payment method for you B2B customers, and invoice them at the end...
">
        <meta itemprop="image" content="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop=entropy&amp;cs=srgb&amp;fm=jpg&amp;ixid=M3w2MzI5ODF8MHwxfHJhbmRvbXx8fHx8fHx8fDE3Njg5MTM5NzR8&amp;ixlib=rb-4.1.0&amp;q=85&amp;auto=format&amp;w=600&amp;h=400&amp;fit=crop&amp;crop=edges,entropy">
                <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@Jibbarth">
        <meta name="twitter:creator" content="@Jibbarth">
        <meta name="twitter:image" content="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop=entropy&amp;cs=srgb&amp;fm=jpg&amp;ixid=M3w2MzI5ODF8MHwxfHJhbmRvbXx8fHx8fHx8fDE3Njg5MTM5NzR8&amp;ixlib=rb-4.1.0&amp;q=85&amp;auto=format&amp;w=600&amp;h=400&amp;fit=crop&amp;crop=edges,entropy">
                <meta name="og:title" content="[Sylius] Restrict Payment Methods depending on customer group // Jib√© Barth">
        <meta name="og:description" content="It could be common to display some payment methods only to customers that belong to a group.
For example, you can add an offline payment method for you B2B customers, and invoice them at the end...
">
        <meta name="og:image" content="https://images.unsplash.com/photo-1487058792275-0ad4aaf24ca7?crop=entropy&amp;cs=srgb&amp;fm=jpg&amp;ixid=M3w2MzI5ODF8MHwxfHJhbmRvbXx8fHx8fHx8fDE3Njg5MTM5NzR8&amp;ixlib=rb-4.1.0&amp;q=85&amp;auto=format&amp;w=600&amp;h=400&amp;fit=crop&amp;crop=edges,entropy">
        <meta name="og:url" content="https://xn--jibbarth-d1a.fr/gist/53569b2072996fe7d2a36faf2eaa577d">
        <meta name="og:site_name" content="Jib√© Barth">
        <meta name="og:type" content="article">
        <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Rss feed for https://jib√©barth.fr">
                                
<link rel="stylesheet" href="/assets/css/app-O5XTNzn.css">
<script type="importmap" data-turbo-track="reload">
{
    "imports": {
        "app": "/assets/app-e9CaxJP.js",
        "/assets/css/app.css": "data:application/javascript,",
        "/assets/stimulus_bootstrap.js": "/assets/stimulus_bootstrap-i5XNGH_.js",
        "@symfony/stimulus-bundle": "/assets/@symfony/stimulus-bundle/loader-V1GtHuK.js",
        "@hotwired/stimulus": "/assets/vendor/@hotwired/stimulus/stimulus.index-S4zNcea.js",
        "/assets/@symfony/stimulus-bundle/controllers.js": "/assets/@symfony/stimulus-bundle/controllers-S0lN4Yq.js",
        "/assets/@symfony/ux-lazy-image/controller.js": "/assets/@symfony/ux-lazy-image/controller-v48qzIH.js",
        "/assets/@symfony/ux-turbo/turbo_controller.js": "/assets/@symfony/ux-turbo/turbo_controller-8wQNi2p.js",
        "/assets/controllers/theme_controller.js": "/assets/controllers/theme_controller--HUAKN7.js",
        "/assets/controllers/mobile_menu_controller.js": "/assets/controllers/mobile_menu_controller-wjJHoM1.js",
        "@hotwired/turbo": "/assets/vendor/@hotwired/turbo/turbo.index-c_qPpoq.js",
        "/assets/controllers/debug_bar_controller.js": "/assets/controllers/debug_bar_controller-P1oRWKI.js",
        "/assets/controllers/share_controller.js": "/assets/controllers/share_controller-9Bc9JWP.js",
        "/assets/controllers/tweet_embed_controller.js": "/assets/controllers/tweet_embed_controller-RUh5Ucy.js",
        "/assets/controllers/code_highlight_controller.js": "/assets/controllers/code_highlight_controller-l2fWuUW.js",
        "/assets/controllers/gist_file_controller.js": "/assets/controllers/gist_file_controller-xRxYlGe.js",
        "/assets/controllers/csrf_protection_controller.js": "/assets/controllers/csrf_protection_controller-6ynUAeX.js",
        "prismjs": "/assets/vendor/prismjs/prismjs.index-MvQv6kS.js",
        "prismjs/themes/prism.min.css": "data:application/javascript,document.head.appendChild(Object.assign(document.createElement('link'),{rel:'stylesheet',href:'/assets/vendor/prismjs/themes/prism.min-FpjheNG.css'}))",
        "prism-themes": "/assets/vendor/prism-themes/prism-themes.index-dqjCWhc.js",
        "jsonp": "/assets/vendor/jsonp/jsonp.index-xkPIbeD.js",
        "debug": "/assets/vendor/debug/debug.index-EqbzKRf.js",
        "ms": "/assets/vendor/ms/ms.index-caPPSHc.js",
        "prism-themes/themes/prism-vsc-dark-plus.css": "data:application/javascript,document.head.appendChild(Object.assign(document.createElement('link'),{rel:'stylesheet',href:'/assets/vendor/prism-themes/themes/prism-vsc-dark-plus-TkdD2UO.css'}))",
        "prismjs/components/prism-core": "/assets/vendor/prismjs/components/prism-core--9ZKwc7.js",
        "prismjs/plugins/autoloader/prism-autoloader": "/assets/vendor/prismjs/plugins/autoloader/prism-autoloader-JiHYg--.js",
        "prismjs/components/prism-ini.min.js": "/assets/vendor/prismjs/components/prism-ini.min-s7N16Lh.js",
        "prismjs/components/prism-bash.min.js": "/assets/vendor/prismjs/components/prism-bash.min-cjaMPi0.js",
        "prismjs/components/prism-css.min.js": "/assets/vendor/prismjs/components/prism-css.min-V17jaGp.js",
        "prismjs/components/prism-diff.min.js": "/assets/vendor/prismjs/components/prism-diff.min-ULuuitL.js",
        "prismjs/components/prism-javascript.min.js": "/assets/vendor/prismjs/components/prism-javascript.min-_qvEKCq.js",
        "prismjs/components/prism-json.min.js": "/assets/vendor/prismjs/components/prism-json.min-TYTv9Jt.js",
        "prismjs/components/prism-markup.min.js": "/assets/vendor/prismjs/components/prism-markup.min-RH3ADtn.js",
        "prismjs/components/prism-php.min.js": "/assets/vendor/prismjs/components/prism-php.min-Fn0Cpl1.js",
        "prismjs/components/prism-twig.min.js": "/assets/vendor/prismjs/components/prism-twig.min-3a4b4Gn.js",
        "prismjs/components/prism-yaml.min.js": "/assets/vendor/prismjs/components/prism-yaml.min-8wFiYOC.js",
        "prismjs/components/prism-clike.min.js": "/assets/vendor/prismjs/components/prism-clike.min-5wOxVGS.js",
        "prismjs/components/prism-markup-templating.min.js": "/assets/vendor/prismjs/components/prism-markup-templating.min-Mbrlx02.js",
        "prism-themes/themes/prism-vsc-dark-plus.min.css": "data:application/javascript,document.head.appendChild(Object.assign(document.createElement('link'),{rel:'stylesheet',href:'/assets/vendor/prism-themes/themes/prism-vsc-dark-plus.min-5arD6Kl.css'}))",
        "prismjs/components/prism-core.min.js": "/assets/vendor/prismjs/components/prism-core.min-IfAwy5H.js"
    }
}
</script><script data-turbo-track="reload">
if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) (function () {
    const script = document.createElement('script');
    script.src = 'https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js';
    script.setAttribute('crossorigin', 'anonymous');
    script.setAttribute('integrity', 'sha384-ie1x72Xck445i0j4SlNJ5W5iGeL3Dpa0zD48MZopgWsjNB/lt60SuG1iduZGNnJn');
    script.setAttribute('data-turbo-track', 'reload');
    document.head.appendChild(script);
})();
</script>
<link rel="modulepreload" href="/assets/app-e9CaxJP.js">
<link rel="modulepreload" href="/assets/stimulus_bootstrap-i5XNGH_.js">
<link rel="modulepreload" href="/assets/@symfony/stimulus-bundle/loader-V1GtHuK.js">
<link rel="modulepreload" href="/assets/vendor/@hotwired/stimulus/stimulus.index-S4zNcea.js">
<link rel="modulepreload" href="/assets/@symfony/stimulus-bundle/controllers-S0lN4Yq.js">
<link rel="modulepreload" href="/assets/@symfony/ux-lazy-image/controller-v48qzIH.js">
<link rel="modulepreload" href="/assets/@symfony/ux-turbo/turbo_controller-8wQNi2p.js">
<link rel="modulepreload" href="/assets/controllers/theme_controller--HUAKN7.js">
<link rel="modulepreload" href="/assets/controllers/mobile_menu_controller-wjJHoM1.js">
<link rel="modulepreload" href="/assets/vendor/@hotwired/turbo/turbo.index-c_qPpoq.js">
<script type="module" data-turbo-track="reload">import 'app';</script>            <script async src="https://analytics.xn--jibbarth-d1a.fr/script.js" data-website-id="caa51ea4-63ea-44b1-bf0d-8403b639829b" data-auto-track="false"></script>
                <script>
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark')
            } else {
                document.documentElement.classList.remove('dark')
            }
        </script>
    </head>
    <body class="flex flex-col min-h-screen bg-background font-sans">
        <header>
                        <div class="relative bg-background text-foreground" data-controller="mobile-menu">
    <nav class="fixed top-0 left-0 right-0 z-50 border-b border-border/40 bg-background/80 backdrop-blur-md transition-all duration-300 transform translate-y-0"
         data-mobile-menu-target="navbar">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex h-16 items-center justify-between">
                                <div class="flex-shrink-0 flex items-center gap-3">
                    <a href="/" class="flex items-center gap-2 group">
                        <div class="relative w-8 h-8 rounded-full overflow-hidden border border-border group-hover:border-primary transition-colors">
                                                        <img src="https://avatars.githubusercontent.com/u/3168281?v=4" alt="Jib√© Barth" class="object-cover w-full h-full">
                        </div>
                        <span class="font-bold text-lg tracking-tight group-hover:text-primary transition-colors">Jib√© Barth</span>
                    </a>
                </div>

                                <div class="hidden md:flex items-center gap-6">
                    <a href="/blog" class="text-sm font-medium hover:text-primary transition-colors">Blog</a>

                    <div class="h-4 w-px bg-border"></div>
                                        <div class="flex items-center gap-3 text-muted-foreground">
                            <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg width="1em" height="1em" viewBox="0 0 496 512" id="885e93e2d4b9df5a791372db9df32627" fill="currentColor" class="icon-inline" aria-hidden="true"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9c1.6 2.3 4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2"></path></svg>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg width="1em" height="1em" viewBox="0 0 512 512" id="4b06f54ea6060482d6b90b3f096be290" fill="currentColor" class="icon-inline" aria-hidden="true"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645c0 138.72-105.583 298.558-298.558 298.558c-59.452 0-114.68-17.219-161.137-47.106c8.447.974 16.568 1.299 25.34 1.299c49.055 0 94.213-16.568 130.274-44.832c-46.132-.975-84.792-31.188-98.112-72.772c6.498.974 12.995 1.624 19.818 1.624c9.421 0 18.843-1.3 27.614-3.573c-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319c-28.264-18.843-46.781-51.005-46.781-87.391c0-19.492 5.197-37.36 14.294-52.954c51.655 63.675 129.3 105.258 216.365 109.807c-1.624-7.797-2.599-15.918-2.599-24.04c0-57.828 46.782-104.934 104.934-104.934c30.213 0 57.502 12.67 76.67 33.137c23.715-4.548 46.456-13.32 66.599-25.34c-7.798 24.366-24.366 44.833-46.132 57.827c21.117-2.273 41.584-8.122 60.426-16.243c-14.292 20.791-32.161 39.308-52.628 54.253"></path></svg>
    </a>
    <a
        href="https://linkedin.com/in/jib√©barth"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg width="1em" height="1em" viewBox="0 0 448 512" id="eb8c06449adb947e50e05f4e5337fdce" fill="currentColor" class="icon-inline" aria-hidden="true"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5c0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7c-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5c67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg width="1em" height="1em" viewBox="0 0 512 512" id="6c719a6da0f9d0ed7889ce08aac713ca" fill="currentColor" class="icon-inline" aria-hidden="true"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8m133.74 143.54c-11.47.41-19.4-6.45-19.77-16.87c-.27-9.18 6.68-13.44 6.53-18.85c-.23-6.55-10.16-6.82-12.87-6.67c-39.78 1.29-48.59 57-58.89 113.85c21.43 3.15 36.65-.72 45.14-6.22c12-7.75-3.34-15.72-1.42-24.56c4-18.16 32.55-19 32 5.3c-.36 17.86-25.92 41.81-77.6 35.7c-10.76 59.52-18.35 115-58.2 161.72c-29 34.46-58.4 39.82-71.58 40.26c-24.65.85-41-12.31-41.58-29.84c-.56-17 14.45-26.26 24.31-26.59c21.89-.75 30.12 25.67 14.88 34c-12.09 9.71.11 12.61 2.05 12.55c10.42-.36 17.34-5.51 22.18-9c24-20 33.24-54.86 45.35-118.35c8.19-49.66 17-78 18.23-82c-16.93-12.75-27.08-28.55-49.85-34.72c-15.61-4.23-25.12-.63-31.81 7.83c-7.92 10-5.29 23 2.37 30.7l12.63 14c15.51 17.93 24 31.87 20.8 50.62c-5.06 29.93-40.72 52.9-82.88 39.94c-36-11.11-42.7-36.56-38.38-50.62c7.51-24.15 42.36-11.72 34.62 13.6c-2.79 8.6-4.92 8.68-6.28 13.07c-4.56 14.77 41.85 28.4 51-1.39c4.47-14.52-5.3-21.71-22.25-39.85c-28.47-31.75-16-65.49 2.95-79.67C204.23 140.13 251.94 197 262 205.29c37.17-109 100.53-105.46 102.43-105.53c25.16-.81 44.19 10.59 44.83 28.65c.25 7.69-4.17 22.59-19.52 23.13"></path></svg>
    </a>


                    </div>

                                         <button data-controller="theme" data-action="theme#toggle" class="p-2 rounded-md hover:bg-accent transition-colors text-muted-foreground hover:text-foreground" aria-label="Toggle theme">
                        <span class="dark:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="dbcab39af6f340747760898ebcc463e4" fill="currentColor" height="1em" width="1em" class="w-5 h-5" aria-hidden="true"><path fill="currentColor" d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.98 6.98 0 0 0 10 7m-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A8 8 0 0 0 4 12"/></svg></span>
                        <span class="hidden dark:inline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="d9d147b80c9cbcca45d99ce9ef2df6b1" fill="currentColor" height="1em" width="1em" class="w-5 h-5" aria-hidden="true"><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12m0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8M11 1h2v3h-2zm0 19h2v3h-2zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414zM23 11v2h-3v-2zM4 11v2H1v-2z"/></svg></span>
                    </button>
                </div>

                                <div class="md:hidden flex items-center">
                    <button type="button" data-action="mobile-menu#toggle" class="p-2 text-muted-foreground hover:text-foreground" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="2ba6b0434fbcda778aeee35ad8de6b17" fill="currentColor" height="1em" width="1em" class="w-6 h-6" data-mobile-menu-target="iconOpen" aria-hidden="true"><path fill="currentColor" d="M16 18v2H5v-2zm5-7v2H3v-2zm-2-7v2H8V4z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="e2e080399c58b8c0604058df0da0472f" fill="currentColor" height="1em" width="1em" class="w-6 h-6 hidden" data-mobile-menu-target="iconClose" aria-hidden="true"><path fill="currentColor" d="m12 10.587l4.95-4.95l1.414 1.414l-4.95 4.95l4.95 4.95l-1.415 1.414l-4.95-4.95l-4.949 4.95l-1.414-1.415l4.95-4.95l-4.95-4.95L7.05 5.638z"/></svg>
                    </button>
                </div>
            </div>
        </div>

                <div class="md:hidden hidden border-t border-border bg-background" data-mobile-menu-target="menu">
            <div class="px-4 py-6 space-y-4">
                 <a href="/blog" class="block text-base font-medium hover:text-primary">Blog</a>
                 <div class="border-t border-border my-4 pt-4 flex items-center justify-between">
                     <span class="text-sm font-medium text-muted-foreground">Theme</span>
                     <button data-controller="theme" data-action="theme#toggle" class="p-2 rounded-md hover:bg-accent transition-colors" aria-label="Toggle theme">
                        <span class="dark:hidden flex items-center gap-2"><svg 0="0 0 24 24" fill="currentColor" height="1em" width="1em" aria-hidden="true"><use href="#dbcab39af6f340747760898ebcc463e4"/></svg> Dark</span>
                        <span class="hidden dark:flex items-center gap-2"><svg 0="0 0 24 24" fill="currentColor" height="1em" width="1em" aria-hidden="true"><use href="#d9d147b80c9cbcca45d99ce9ef2df6b1"/></svg> Light</span>
                    </button>
                 </div>
            </div>
        </div>
    </nav>
</div>

            <div class="relative pt-24 pb-12 overflow-hidden bg-background">
                                 <div class="absolute inset-0 z-0">
                            <img
        class="absolute inset-0 w-full h-full object-cover opacity-20"
        src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gODAK/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxobIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8AAEQgBLAZAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A4eiiitjcKKKKACiiigAooooAKQ0tBoASiiigAooopgIaSlNJQAUUUUAFJSmkpgFBopDQAUUUUCENJSmkpgFFFFABSUtJTAKQ0tIaYBSUtJQAlFFFAhKKKKYCGig0VQCGkpTSUAFBopDTAKKKKACg0UhpgFFFIaYhKKKKACkNLSUxBRRRTAKSg0UAFFFFMAoopDTEJRRRTGFFFFMQUUUUAFFFFAgooopgFKKSigB1FJS0AFFFFAAKWkpaYgooooAKKKKAClpKWgApRSUooAWiiigQtFFFACiiiigBRS0gpaAAUtAooAKWkpaAClFJSigQtFFFIAFLQKKACloFFABTqQUtIApRSUtABSikpaACiiigAoopRSAWiiigApaQUtIAooooAUUUUUAFFFLikACloooGFFFGKQBS0UUAFFFFIAooooAKKXFFABSUtIaQBRRRQAUUUUgCiiigAooooAKKKKQBSGlooASijFFAwooooAKKKKQBRRRQAhpKU0lABRRRSAKKKKAA0lBooGFFFFJgFFFBpCEooooGFFFFABRRSUAJRRRQAUUUUgCiijNABSUUUAFFFFABRRRRYAooooAKKKM0gCikzRmgBaKTNGaAJaKKKzuahRRRRcAooooAKKKTNMYtFJmjNAhTSUZooAKKKKYBSUtJQAlFFFAAaSlpKYBSGlooASiiigBDSUppKYBRRSGgAoopDTAWkNFFABSGlpDTASiigmmISiiimAlFFFACGkoopgBpKDRTAKKKSmIDRSUUAGaSiimAUUUmaAFNJRRTEFFFJTAKKKSmAtFJmkpiFpKKKYBRRRQAUUZooAKKKKYBRRRQIKKKKYBRRRQAopabS5piFopM0ZoAWikpaACjNFFAC0UUUAFLSCloEFKKSnUAFAopaACgUUooAKWkpRQAtFFFACiigUUCClpBS0AFKKKWgAoopaQBRRS0AFLRS0AFFFLSAKKKWgAooooAKKWjFIApaKMUAFGKWigAopcUUgDFFFLigBKXFFLQAlLRilxSASjFLRSAKKKKACiijFABRS0UhhRRRQAUUUUgCg0UUAJRS0YoASilxRSASilooASilooASilxSUgCiiigAooooASilpMUhhRRRQAUUUUAIaSlpKQBRRRQAUUUGgBKKKKBhRRRSEFJRRQMKKKKQBSUZpKACiiigAopM0UALRmkooAKKKM0gCikzRmgBaKSigAzRmiigAopKM0ALRSZozQAtFJmjNAC0UmaM0ATUUuKMVkaiUUuKTFABRRRQAUUUUAJiilopiEooxRQMKKKKBCUUGkoGFFFBpiDNFJRQMKKKM0xCGiikoAWm0uaSmAUhpaDQAlIaWkNMApKWkNABSUUGmAlFFFMQUhopKYC0maKSgAopKKYBRRSUwCiikNMQUlFBpgBpKKKACkzRRTAKM0maM0wFpM0lGaYhaSkooAWikzRmmAtGabmjNMBaKSjNAC0UmaM0xC0UmaKAFopBS0wAUuaTNGaBC5ozSUUwFzRSUUALRQKKAClFJSigQtFFFAC0UUUAKKKKKAFFLSUtABS0lAoELSikoFAC0UUooAWiilFAAKKKWgApaKWkAUUCloAKXFIKWgApRRS0AFAopaQBRRS0AFFFKKADFFLRigAoxS0YpAFFLiigAxRS4paAExRilxRikAUYpaKAExS0uKKQCUuKKKADFFFFIAxRiiloASilxRikAlFLiloAbS4paKAExRilopAJSU6igY2inUUANop1FIBtFOpKAEopcUYpAJRS0lABikpaKAEopaSgAooopAIaKWkoAKKKKACm06kNIYlFFFABSUppKACiiigAzSUUUgCikzRQAZpKKM0AFFGaSkAuaSiigAopM0UAFFFJmgBaTNJRQMXNGaTNJmgB2aKbRQAtFJmkzSAdRmm5ozQA7NGabmjNADs0ZpuaM0AOzRmm5ozQBazRmkxRWJoLmjNJRTAM0UUUAFFFFABRmikoAM0UUUAFFFJTELSGjNFACUUUZpgIaKKKACkpaQ0AFIaWkNMBKDRQaAEoooNMBM0UUhpgGaSig0AFBpKM0wCkNFJTELSGikpgFJSmkoAKTNBopgJRmg0lMBc0lJRTELmkzSUUwDNFJmjNMBaQmkzSZpgLRSUUCCijNJmmAtJmiimAUUUmaYC0UmaSgBaM0lFMBc0ZpKKBC5ozSUUwFpabS0CFopM0tMAoFFFAC0UmaXNABS0lFAC0opBRTEOopBS0AGaWkpaAClpKWkAUopKdQAUopBS0AFLQKWgQClooFACiiiloAKWkpRSAWiijFACiiiloGAopaWgQlLRilpAFGKWlxQAlLiloxQAUYpaXFIBKXFFLigBKXFLRigBMUtLRSATFLRRQAUUuKKQwxRS4oxQAlLilooATFFLijFIBMUU6igBKMUtGKQCYoxTsUYoAbilxS4oxQAlFLRSASilooASilooASilxSUgDFJilooGJRS0UAJRRiikIKSlooGJikp1IaAEooooAQ0UGikAhooNFABRRSUAGaSiigAoozSUhhRRSZoAWkopKAFpDRmkoAKDRmkpAFFBpKADNFIaSgBaM0lGaAFzRmm5ozSAXNGabmjNADs0lNzRmgB1GabmjNAC5opuaM0AOpM0maTNADs0U3NGaAFopM0ZoAWikzSZoAdRmm5ozQBeopKK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"
        data-controller="symfony--ux-lazy-image--lazy-image" data-symfony--ux-lazy-image--lazy-image-src-value="https://images.unsplash.com/photo-1542373285-a85124c4f3e6?crop=entropy&amp;cs=srgb&amp;fm=jpg&amp;ixid=M3w2MzI5ODF8MHwxfHJhbmRvbXx8fHx8fHx8fDE3Njg5MTM5Nzh8&amp;ixlib=rb-4.1.0&amp;q=85&amp;auto=format&amp;w=1600&amp;h=300&amp;fit=crop&amp;crop=edges,entropy"
        alt="Banner image for this article, an unsplash image with coding theme">
                                         <div class="absolute inset-0 bg-background/60 backdrop-blur-[2px]"></div>
                </div>

                <div class="container mx-auto px-4 relative z-10">
                    <div class="flex flex-col md:flex-row items-center gap-8 md:gap-16">
                                                <div class="relative group">
                            <div class="absolute -inset-1 bg-gradient-to-r from-primary to-secondary rounded-full blur opacity-50 group-hover:opacity-100 transition duration-1000 group-hover:duration-200"></div>
                            <div class="relative w-40 h-40 md:w-56 md:h-56 rounded-full overflow-hidden border-4 border-background ring-2 ring-border">
                                                                        <img src="https://avatars.githubusercontent.com/u/3168281?v=4" alt="Jib√© Barth" class="w-full h-full object-cover">
                            </div>
                        </div>

                                                <div class="text-center md:text-left max-w-2xl flex-1">
                                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent text-accent-foreground text-xs font-medium mb-4">
        Symfony 4 Certified Developer
        <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
            <span class="relative -left-1/4 -top-1/4 inline-flex rounded-full h-4 w-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="5f141a9b7fc6fc0bce1ecf44cf0bdeae" fill="currentColor" height="1em" width="1em" class="text-blue-500" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M12 21a9 9 0 1 0 0-18a9 9 0 0 0 0 18m-.232-5.36l5-6l-1.536-1.28l-4.3 5.159l-2.225-2.226l-1.414 1.414l3 3l.774.774z" clip-rule="evenodd"/></svg></span>
        </span>
    </div>
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent text-accent-foreground text-xs font-medium mb-4">
        Sylius Certified Developer
        <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
            <span class="relative -left-1/4 -top-1/4 inline-flex rounded-full h-4 w-4"><svg 0="0 0 24 24" fill="currentColor" height="1em" width="1em" class="text-blue-500" aria-hidden="true"><use href="#5f141a9b7fc6fc0bce1ecf44cf0bdeae"/></svg></span>
        </span>
    </div>

                            <p class="text-4xl md:text-6xl font-bold tracking-tight mb-4 text-foreground">
                                Jib√© Barth
                            </p>
                            <div class="text-xl text-muted-foreground mb-6 leading-relaxed">
                                üá´üá∑ Web developer
                                <div>    <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 496 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#885e93e2d4b9df5a791372db9df32627"/></svg>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 512 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#4b06f54ea6060482d6b90b3f096be290"/></svg>
    </a>
    <a
        href="https://linkedin.com/in/jib√©barth"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 448 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#eb8c06449adb947e50e05f4e5337fdce"/></svg>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 512 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#6c719a6da0f9d0ed7889ce08aac713ca"/></svg>
    </a>

</div>
                            </div>
                        </div>
                    </div>

                                        <div class="">
                            <div class="text-center mt-1">
        <h1 class="block text-foreground text-3xl md:text-5xl font-bold mb-2 leading-tight">[Sylius] Restrict Payment Methods depending on customer group</h1>
        <p class="inline-block text-muted-foreground text-lg font-medium">Published March 14, 2021</p>
    </div>
                    </div>
                </div>
            </div>
                    </header>
        <main class="grow">
                <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
             <div class="rounded-xl border border-border bg-muted/30 dark:bg-muted/40 p-6 md:p-10 shadow-sm">
                <div class="markdown prose dark:prose-invert max-w-none" data-controller="code-highlight">
                                            <div class="bg-muted border-l-4 border-primary text-muted-foreground p-4 mb-8" role="alert">
    <p class="font-bold">‚ö†Ô∏è Warning ‚ö†Ô∏è</p>
    <p>This article was written 4 years and 10 months ago. The informations it contains may be outdated or no longer relevant.</p>
</div>

                                        <p>It could be common to display some payment methods only to customers that belong to a group.</p>
<p>For example, you can add an offline payment method for you B2B customers, and invoice them at the end of the month, and this offline payment should absolutely not be available for other customer!
Let's see how to integrate this in a Sylius Application.</p>
<h2><a id="content-1-the-quick-and-dirty-way" href="#content-1-the-quick-and-dirty-way" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>1. The Quick and Dirty way</h2>
<p>The form displaying payment methods in Sylius retrieve them from the service <code>sylius.payment_methods_resolver</code>.</p>
<p>Let's decorate it !</p>
<p>First, create a class <code>PaymentMethodsResolverDecorator</code> which extend <code>PaymentMethodsResolverInterface</code>, and that have this same interface as first dependency.</p>
<pre><code class="language-php">// src/Resolver/PaymentMethodsResolverDecorator.php
&lt;?php

declare(strict_types=1);

namespace App\Resolver;

use Sylius\Component\Payment\Model\PaymentInterface;
use Sylius\Component\Payment\Model\PaymentMethodInterface;
use Sylius\Component\Payment\Resolver\PaymentMethodsResolverInterface;

final class PaymentMethodResolverDecorator implements PaymentMethodsResolverInterface
{
    private PaymentMethodsResolverInterface $decorated;

    public function __construct(PaymentMethodsResolverInterface $decorated)
    {
        $this-&gt;decorated = $decorated;
    }

    public function getSupportedMethods(PaymentInterface $subject): array
    {
        return $this-&gt;decorated-&gt;getSupportedMethods($subject);
    }

    public function supports(PaymentInterface $subject): bool
    {
        return $this-&gt;decorated-&gt;supports($subject);
    }
}
</code></pre>
<p>And activate the decoration of service inside your <code>services.yaml</code></p>
<pre><code class="language-yaml">#config/services.yaml
services:
    # ...
    App\Resolver\PaymentMethodResolverDecorator:
        decorates: 'sylius.payment_methods_resolver'
</code></pre>
<p>You are now ready to integrate the  restriction !</p>
<p>The PaymentInterface passed as subject in getSupportedMethods contains the current order,
and the current order contains the customer.</p>
<p>So, if we want exclude the Offline Payment Method named &quot;End of the month&quot;
except for customers that belong to &quot;B2B&quot; group, we could code something like this:</p>
<pre><code class="language-php">//src/Resolver/PaymentMethodsResolverDecorator.php
&lt;?php 
//...
    private const B2B_PAYMENT_METHOD_CODE = 'end_of_month';
    private const B2B_GROUP_CODE = 'b2b';

    public function getSupportedMethods(PaymentInterface $subject): array
    {
        /** @var \App\Entity\Customer\CustomerGroup $customerGroup */
        $customerGroup = $subject-&gt;getOrder()-&gt;getCustomer()-&gt;getGroup();
        $customerGroupCode = null;
        if (null !== $customerGroup) {
            $customerGroupCode = $customerGroup-&gt;getCode();
        }
        
        $supportedMethods = $this-&gt;decorated-&gt;getSupportedMethods($subject);

        foreach ($supportedMethods as $index =&gt; $method) {
            if ($method-&gt;getCode() === self::B2B_PAYMENT_METHOD_CODE &amp;&amp; $customerGroupCode !== self::B2B_GROUP_CODE) {
                // We unset this payment method because customer don't belong to required group
                unset($supportedMethods[$index]);
            }
        }

        return $supportedMethods;
    }
//...
</code></pre>
<p>And that's it ! Navigate on your shop, with a non logged user or an user without group, and you'll never aware about the existence of
&quot;End Of Month&quot; payment method.</p>
<p>Conversely, all customers in the &quot;B2B&quot; group will be able to use it.</p>
<p>This method is great for a quick restriction, but it's not scalable, there is hardcoded code in source...</p>
<p>Let's see how to do it better.</p>
<h2><a id="content-2-the-clean-and-evolving-way" href="#content-2-the-clean-and-evolving-way" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>2. The clean and evolving way</h2>
<p>The best way should be something that is configurable form PaymentMethod Form. We should ideally have a CustomerGroup selector, and if no one is selected, the payment method is accessible for everyone.</p>
<p>So, we should alter the form to get the customer group selector.</p>
<p>The class responsible to render it is <code>Sylius\Bundle\PaymentBundle\Form\Type\PaymentMethodType</code></p>
<p>We could easily extend this form by <a href="https://symfony.com/doc/current/form/create_form_type_extension.html">creating a form type extension</a>, but there is some drawbacks.
First, we should add field on  PaymentMethod Entity, to carry information of customer groups, and alter view of the form to add this new field.
It's definitely not an evolving way, because we could lose template evolution by upgrading Sylius versions.</p>
<p>The Payment Methods offer a Gateway configuration, and everything is stored as a JSON inside the database, and the field already exist.</p>
<p>But, every payment plugin can create their own <a href="https://docs.sylius.com/en/latest/cookbook/payments/custom-payment-gateway.html">Gateway configuration</a>, so we have to do some black magic to add our field on every GatewayConfig.</p>
<p>Let's start by creating a GatewayConfigurationExtension :</p>
<pre><code class="language-php">// src/Form/Extension/GatewayConfigurationExtension.php
&lt;?php
    
declare(strict_types=1);

namespace App\Form\Extension;

use Symfony\Component\Form\AbstractTypeExtension;
use Symfony\Component\Form\FormBuilderInterface;

final class GatewayConfigurationExtension extends AbstractTypeExtension 
{
    public static function getExtendedTypes(): iterable
    {
        // TODO
        return [];
    }
    
    public function buildForm(FormBuilderInterface $builder, array $options): void
    {
        // TODO
    }
}
</code></pre>
<p>Next, we want extend every GatewayConfigurationType provided by plugins.</p>
<p>As we can see, for a Form Extension, we should return the class name of extended types. We cannot provide them here, as we don't want to update this class each time we had a new plugin.</p>
<p>To handle that, we'll use the power of CompilerPass.</p>
<p>Let's modify this class first :</p>
<pre><code class="language-php">// src/Form/Extension/GatewayConfigurationExtension.php
&lt;?php
// ...

    public static array $extendedTypes = [];
    
    public static function getExtendedTypes(): iterable
    {
        return self::$extendedTypes;
    }

    public function setExtendedTypes(array $extendedTypes): void
    {
        self::$extendedTypes = $extendedTypes;
    }
</code></pre>
<p>We add a static property that carry all extendedTypes we want.</p>
<p>Then, the CompilerPass :</p>
<pre><code class="language-php">// src/CompilerPass/GatewayConfigurationExtensionCompilerPass.php
&lt;?php

declare(strict_types=1);

namespace App\CompilerPass;

use App\Form\Extension\GatewayConfigurationExtension;
use Sylius\Bundle\PayumBundle\Form\Type\GatewayConfigType;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;

final class GatewayConfigurationExtensionCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $gatewayServices = $container-&gt;findTaggedServiceIds('sylius.gateway_configuration_type');
        $gatewayTypes = [GatewayConfigType::class];

        foreach ($gatewayServices as $service =&gt; $definitions) {
            $gatewayTypes[] = $container-&gt;getDefinition($service)-&gt;getClass();
        }
        GatewayConfigurationExtension::$extendedTypes = $gatewayTypes;
        
        $definition = $container-&gt;getDefinition(GatewayConfigurationExtension::class);
        $definition-&gt;addMethodCall('setExtendedTypes', [$gatewaysTypes]);  
    }
}

</code></pre>
<p>Let me explain. We retrieve all services that are tagged as <code>sylius.gateway_configuration_type</code>. This is the tag to apply when plugins want to provide a custom configuration in their PaymentMethod.</p>
<p>We then retrieve the class name for all of these services.
And we set the static property with theses class names.</p>
<p>We also define a <code>methodCall</code> that call our function <code>setExtendedTypes</code>, this is used later when the container is compiled.</p>
<p>The hard coded  <code>GatewayConfigType::class</code> is here to let us handle payment methods without GatewayConfiguration provided. We'll see why in the form extension.</p>
<p>Then, we modify the <code>Kernel</code> class to register this CompilerPass :</p>
<pre><code class="language-php">// src/Kernel.php
&lt;?php
// ...
    protected function build(ContainerBuilder $container): void
    {
        $container-&gt;addCompilerPass(new GatewayConfigurationExtensionCompilerPass());
    }
</code></pre>
<p>At this point, we are still not ready to alter our forms.</p>
<p>In effect, if we try to build the container, an error is raised :</p>
<blockquote>
<p>The getExtendedTypes() method for service &quot;App\Form\Extension\GatewayConfigurationExtension&quot; does not return any extended types.</p>
</blockquote>
<p>It's because the other Compilerpass that register form extensions is processed before our own CompilerPass. To bypass this, we need more black magic !</p>
<p>Let's rework the <code>build</code> method in <code>Kernel</code>.</p>
<pre><code class="language-php">// src/Kernel.php
&lt;?php
// ...
    protected function build(ContainerBuilder $container): void
    {
        $passesBeforeOptimization = $container-&gt;getCompiler()-&gt;getPassConfig()-&gt;getBeforeOptimizationPasses();
        $passTypeToRegisterLater = [FormPass::class];
        $passToRegisterLater = [];

        foreach ($passesBeforeOptimization as $index =&gt; $compilerPass) {
            $compilerClass = \get_class($compilerPass);
            if (\in_array($compilerClass, $passTypeToRegisterLater, true)) {
                unset($passesBeforeOptimization[$index]);
                $passToRegisterLater[] = $compilerPass;
            }
        }
        $container-&gt;getCompiler()-&gt;getPassConfig()-&gt;setBeforeOptimizationPasses($passesBeforeOptimization);

        $container-&gt;addCompilerPass(new GatewayConfigurationExtensionCompilerPass());
        
        foreach ($passToRegisterLater as $compilerPass) {
            $container-&gt;addCompilerPass($compilerPass);
        }
    }
</code></pre>
<p>With this manipulation, we retrieve the CompilerPass responsible to register form extension (<code>FormPass</code>), and we unset it.
We then register our CompilerPass, and after that, we re-register CompilerPass unsetted.</p>
<p>We can now alter our forms. Go back to our Extension :</p>
<pre><code class="language-php">// src/Form/Extension/GatewayConfigurationExtension.php
&lt;?php
// ...
    public function buildForm(FormBuilderInterface $builder, array $options): void
    {
        $customerGroupFormOptions = [
            'entry_type' =&gt; CustomerGroupCodeChoiceType::class,
            'required' =&gt; false,
            'prototype' =&gt; true,
            'allow_add' =&gt; true,
            'allow_delete' =&gt; true,
            'by_reference' =&gt; false,
            'label' =&gt; 'Customer Groups',
        ];

        if ($builder-&gt;getName() === 'config') {
            // This form has a gateway config. Easy, just add field
            $builder-&gt;add('customer_group', CollectionType::class, $customerGroupFormOptions);
            return;
        }
    
        $builder-&gt;addEventListener(FormEvents::PRE_SET_DATA, static function (FormEvent $event) use ($customerGroupFormOptions) {
            /** @var \Symfony\Component\Form\Form $form */
            $form = $event-&gt;getForm();
            if ($form-&gt;has('config')) {
                // already handle (see above)
                return;
            }
            // We are on a PaymentMethod without GatewayConfig (like offline method). 
            // Let's add config key, and customer_group inside.
            $form-&gt;add('config', FormType::class);
            $configForm = $form-&gt;get('config');
            $configForm-&gt;add('customer_group', CollectionType::class, $customerGroupFormOptions);
        });
    }
</code></pre>
<p>And, VOILA ü•≥ We got customer groups selector inside our payment methods form.</p>
<p><img src="https://user-images.githubusercontent.com/3168281/111082452-ab978a80-8508-11eb-844c-b29e52caaaa9.png" alt="image" /></p>
<p>We can finally implement the logic into the Decorator described in part 1.</p>
<pre><code class="language-php">// src/Resolver/PaymentMethodsResolverDecorator.php
&lt;?php
// ...

    public function getSupportedMethods(PaymentInterface $subject): array
    {
        /** @var \App\Entity\Customer\CustomerGroup $customerGroup */
        $customerGroup = $subject-&gt;getOrder()-&gt;getCustomer()-&gt;getGroup();
        $customerGroupCode = null;
        if (null !== $customerGroup) {
            $customerGroupCode = $customerGroup-&gt;getCode();
        }

        $supportedMethods = $this-&gt;decorated-&gt;getSupportedMethods($subject);

        /** @var \App\Entity\Payment\PaymentMethod $method */
        foreach ($supportedMethods as $index =&gt; $method) {
            if (null === $method-&gt;getGatewayConfig()) {
                continue;
            }
            $config = $method-&gt;getGatewayConfig()-&gt;getConfig();
            if (!\array_key_exists('customer_group', $config) || $config['customer_group'] === []) {
                // No customer_groups setted on config
                continue;
            }

            if (!\in_array($customerGroupCode, $config['customer_group'], true)) {
                // CustomerGroup is not in configured groups for this payment method.
                // Unset it
                unset($supportedMethods[$index]);
            }
        }

        return $supportedMethods;
    }
</code></pre>
<h2><a id="content-3-conclusion" href="#content-3-conclusion" class="heading-permalink" aria-hidden="true" title="Permalink">#</a>3. Conclusion</h2>
<p>We saw 2 methods to do the &quot;same thing&quot;.
The first part took me around 20 minutes to code.
The second part took me around 4 hours.</p>
<p>And we get the same result (for the final customer üôÉ)</p>
<p>You may decide to use one or other, or even a third method (share it with me if you have an other üòâ).<br />
Like usual, it depends of your need, and your Customer need.</p>

                </div>

                
                <div class="mt-8 pt-6 border-t border-border flex flex-wrap gap-4 justify-end">
                    <a href="#" data-controller="share" class="share hide inline-flex items-center px-4 py-2 rounded-md bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors text-sm font-medium" data-title="[Sylius] Restrict Payment Methods depending on customer group">
                        <svg width="1em" height="1em" viewBox="0 0 448 512" id="214d77511192f0da456a7b961890ec1f" fill="currentColor" class="mr-2 w-4 h-4" aria-hidden="true"><path fill="currentColor" d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96s-42.981-96-96-96"></path></svg>
                        Share
                    </a>
                    <a href="https://gist.github.com/Jibbarth/53569b2072996fe7d2a36faf2eaa577d"
                       target="_blank" rel="nofollow,noopener"
                       class="inline-flex items-center px-4 py-2 rounded-md border border-border bg-background hover:bg-accent hover:text-accent-foreground transition-colors text-sm font-medium">
                        <svg width="1em" height="1em" viewBox="0 0 512 512" id="8d509205a78cebfad3b32121540aa2d7" fill="currentColor" class="mr-2 w-4 h-4" aria-hidden="true"><path fill="currentColor" d="M432 320h-32a16 16 0 0 0-16 16v112H64V128h144a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16H48a48 48 0 0 0-48 48v352a48 48 0 0 0 48 48h352a48 48 0 0 0 48-48V336a16 16 0 0 0-16-16M488 0H360c-21.37 0-32.05 25.91-17 41l35.73 35.73L135 320.37a24 24 0 0 0 0 34L157.67 377a24 24 0 0 0 34 0l243.61-243.68L471 169c15 15 41 4.5 41-17V24a24 24 0 0 0-24-24"></path></svg>
                        React on gist.github.com
                    </a>
                </div>
            </div>

             <div class="mt-8 text-center">
                <div class="my-6">
    <a href="/" class="inline-flex items-center px-4 py-2 rounded-md border border-border bg-background hover:bg-accent hover:text-accent-foreground transition-colors text-sm font-medium">
        <svg width="1em" height="1em" viewBox="0 0 512 512" id="bbbaa1b4fb5f58c910f84607cda5429a" fill="currentColor" class="mr-2 w-4 h-4" aria-hidden="true"><path fill="currentColor" d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248s-111 248-248 248m28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3"></path></svg>
        Back to home
    </a>
</div>

            </div>
        </div>
    </div>
        </main>
        <footer class="border-t border-border bg-muted/20">
            <div class="container mx-auto px-4 py-8">
                <div class="flex flex-col md:flex-row items-center justify-between gap-6 text-sm text-muted-foreground">
                                        <div class="text-center md:text-left space-y-1">
                        <div class="font-medium text-foreground">¬© 2026 Jib√© Barth</div>
                    </div>

                                        <div class="text-center">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground border border-border font-mono" title="Site generation time">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="a5c40754e8b12ae54cc46a4f77ab993c" fill="currentColor" height="1em" width="1em" class="w-3 h-3 mr-1 opacity-70" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0a9 9 0 0 1 18 0"/></svg>
                            Generated Jan 20, 2026, 12:59‚ÄØPM
                        </span>
                    </div>

                                        <div class="text-center md:text-right flex items-center justify-end gap-1">
                            <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 496 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#885e93e2d4b9df5a791372db9df32627"/></svg>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 512 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#4b06f54ea6060482d6b90b3f096be290"/></svg>
    </a>
    <a
        href="https://linkedin.com/in/jib√©barth"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 448 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#eb8c06449adb947e50e05f4e5337fdce"/></svg>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener"
        class="inline-flex items-center justify-center w-8 h-8 rounded-md text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
    >
        <svg 0="0 0 512 512" fill="currentColor" height="1em" width="1em" class="icon-inline" aria-hidden="true"><use href="#6c719a6da0f9d0ed7889ce08aac713ca"/></svg>
    </a>


                    </div>
                </div>
            </div>
        </footer>
        <div
    data-controller="debug-bar"
    class="fixed bottom-0 right-0 z-50 font-sans text-[13px] shadow-lg transition-all duration-300 w-auto cursor-pointer"
>
        <div
        data-action="click->debug-bar#toggle"
        class="flex items-center justify-center bg-[#222] hover:bg-[#333] transition-colors h-10 px-3"
        title="Click to toggle debug bar"
    >
        <div class="flex items-center gap-2 text-xl">
            <svg 0="0 0 512 512" fill="currentColor" height="1em" width="1em" class="text-gray-300" aria-hidden="true"><use href="#6c719a6da0f9d0ed7889ce08aac713ca"/></svg>
        </div>
    </div>

        <div
        data-debug-bar-target="content"
        class="hidden flex items-center justify-between w-full h-10 bg-[#222] border-t border-[#444] absolute inset-0 pl-2"
    >
                  <div class="flex items-center h-full overflow-x-auto no-scrollbar">
                          <div class="flex items-center h-full hover:bg-[#333] transition-colors border-r pr-2 border-[#333] whitespace-nowrap cursor-default px-3 gap-2">
                 <span class="bg-[#28a745] text-white px-1.5 py-0.5 rounded-sm font-bold text-[10px]">200</span>
                 <span class="text-[#888]">@</span>
                 <span class="text-white">article_detail</span>
             </div>

                          <div class="flex items-center h-full px-3 hover:bg-[#333] transition-colors border-r border-[#333] gap-2 whitespace-nowrap cursor-default">
                 <span class="text-[#888] text-lg"><svg 0="0 0 24 24" fill="currentColor" height="1em" width="1em" aria-hidden="true"><use href="#a5c40754e8b12ae54cc46a4f77ab993c"/></svg></span>
                 <span class="text-white font-mono">38 ms</span>
             </div>

                          <div class="flex items-center h-full px-3 hover:bg-[#333] transition-colors border-r border-[#333] gap-2 whitespace-nowrap cursor-default">
                 <span class="text-[#888] text-lg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="cef93c71552d18c8646b54b019b262fe" fill="currentColor" height="1em" width="1em" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25m.75-12h9v9h-9z"/></svg></span>
                 <span class="text-white font-mono">6.0 MiB</span>
             </div>
         </div>

                  <div class="flex items-center h-full border-l border-[#444] bg-[#222] relative z-20">
                         <div class="group relative flex items-center h-full px-3 hover:bg-[#333] transition-colors gap-2 whitespace-nowrap cursor-pointer border-r border-[#444]">
                 <span class="text-[#AAA] hidden text-lg sm:inline">
                     <svg 0="0 0 512 512" fill="currentColor" height="1em" width="1em" class="text-gray-300" aria-hidden="true"><use href="#6c719a6da0f9d0ed7889ce08aac713ca"/></svg>
                 </span>
                 <span class="text-white font-mono">8.0.3</span>

                                  <div
                    class="hidden group-hover:block absolute bottom-full right-0 w-80 bg-[#222] border border-[#444] shadow-xl text-left cursor-default z-[100] divide-y divide-[#333]"
                    style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;"
                 >
                                        <div class="px-3 py-2 bg-[#1f1f1f]">
                         <div class="grid grid-cols-[100px_1fr] gap-2 text-xs">
                             <div class="text-[#888]">Environment</div>
                             <div class="text-[#AAA]">prod</div>
                             <div class="text-[#888]">Debug</div>
                             <div><span class="bg-destructive text-white px-1 py-0.5 text-[10px] uppercase font-bold rounded-sm">disabled</span></div>
                         </div>
                    </div>

                                        <div class="px-3 py-2 bg-[#222]">
                        <div class="grid grid-cols-[100px_1fr] gap-2 text-xs">
                            <div class="text-[#888] font-bold">PHP version</div>
                            <div class="text-[#AAA]">8.4.16</div>

                            <div class="text-[#888] font-bold">PHP Extensions</div>
                            <div class="flex flex-wrap gap-2 text-[10px]">
                                <span class="text-[#888] flex items-center gap-0.5">Xdebug <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="7d86657ec42b2f44851338be8eb2ccb4" fill="currentColor" height="1em" width="1em" class="w-3 h-3 text-red-500" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"/></svg></span>
                                <span class="text-[#888] flex items-center gap-0.5">APCu <svg 0="0 0 24 24" fill="currentColor" height="1em" width="1em" class="w-3 h-3 text-red-500" aria-hidden="true"><use href="#7d86657ec42b2f44851338be8eb2ccb4"/></svg></span>
                                <span class="text-white flex items-center gap-0.5 bg-[#1f6b3b] px-1 rounded-sm">OPcache <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="c8147b17c58fcce0f7eba701aebc9391" fill="currentColor" height="1em" width="1em" class="w-3 h-3 text-white" aria-hidden="true"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m4.5 12.75l6 6l9-13.5"/></svg></span>
                            </div>

                            <div class="text-[#888] font-bold">PHP SAPI</div>
                            <div class="text-[#AAA]">Static website</div>

                            <div class="text-[#888] font-bold">Server</div>
                            <div class="text-[#AAA]">Github Pages</div>
                        </div>
                    </div>

                                         <div class="px-3 py-2 bg-[#1f1f1f]">
                         <div class="grid grid-cols-[100px_1fr] gap-2 text-xs">
                             <div class="text-[#888] font-bold">Resources</div>
                             <div class="text-[#89a2dd] underline cursor-pointer"><a href="https://github.com/jibbarth/site-src/">Website source</a></div>
                         </div>
                    </div>
                 </div>
            </div>

                        <div data-action="click->debug-bar#toggle" class="h-full flex items-center justify-center px-3 hover:bg-[#444] cursor-pointer text-[#AAA] hover:text-white transition-colors">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="8a5ba483160c19ceaf02bf2f80cabe94" fill="currentColor" height="1em" width="1em" class="w-4 h-4" aria-hidden="true"><path fill="currentColor" d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94z"/></svg>
            </div>
         </div>
    </div>
</div>

    </body>
</html>
