<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
                    <title>üá´üá∑ API Platform, Oauth, &amp; Swagger UI // Jib√© Barth</title>
                        <meta name="author" content="Jib√© Barth">
            <meta name="description" content="¬∂Api Platform, OAuth &amp; Swagger
Aujourd'hui, nous allons voir comment utiliser une authentification OAuth, pour notre projet API Platform, √† travers Swagger UI.
Cela nous permettra d'activer plus...
">
            <meta name="image" content="https://images.unsplash.com/photo-1549605659-32d82da3a059?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=400&amp;ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0NTM3MTY3&amp;ixlib=rb-1.2.1&amp;q=80&amp;utm_campaign=api-credit&amp;utm_medium=referral&amp;utm_source=unsplash_source&amp;w=600">
                        <meta itemprop="name" content="üá´üá∑ API Platform, Oauth, &amp; Swagger UI // Jib√© Barth">
            <meta itemprop="description" content="¬∂Api Platform, OAuth &amp; Swagger
Aujourd'hui, nous allons voir comment utiliser une authentification OAuth, pour notre projet API Platform, √† travers Swagger UI.
Cela nous permettra d'activer plus...
">
            <meta itemprop="image" content="https://images.unsplash.com/photo-1549605659-32d82da3a059?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=400&amp;ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0NTM3MTY3&amp;ixlib=rb-1.2.1&amp;q=80&amp;utm_campaign=api-credit&amp;utm_medium=referral&amp;utm_source=unsplash_source&amp;w=600">
                        <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="@Jibbarth">
            <meta name="twitter:creator" content="@Jibbarth">
            <meta name="twitter:image" content="https://images.unsplash.com/photo-1549605659-32d82da3a059?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=400&amp;ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0NTM3MTY3&amp;ixlib=rb-1.2.1&amp;q=80&amp;utm_campaign=api-credit&amp;utm_medium=referral&amp;utm_source=unsplash_source&amp;w=600">
                        <meta name="og:title" content="üá´üá∑ API Platform, Oauth, &amp; Swagger UI // Jib√© Barth">
            <meta name="og:description" content="¬∂Api Platform, OAuth &amp; Swagger
Aujourd'hui, nous allons voir comment utiliser une authentification OAuth, pour notre projet API Platform, √† travers Swagger UI.
Cela nous permettra d'activer plus...
">
            <meta name="og:image" content="https://images.unsplash.com/photo-1549605659-32d82da3a059?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=400&amp;ixid=MnwxfDB8MXxyYW5kb218fHx8fHx8fHwxNjI0NTM3MTY3&amp;ixlib=rb-1.2.1&amp;q=80&amp;utm_campaign=api-credit&amp;utm_medium=referral&amp;utm_source=unsplash_source&amp;w=600">
            <meta name="og:url" content="https://xn--jibbarth-d1a.fr">
            <meta name="og:site_name" content="Jib√© Barth">
            <meta name="og:type" content="article">
            <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Rss feed for https://jib√©barth.fr">
                            <link rel="stylesheet" href="/dist/tailwind.css">
            <link rel="stylesheet" href="/dist/208.css"><link rel="stylesheet" href="/dist/app.css">
                            <script async src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" rel="prefetch" crossorigin="anonymous"></script>
            <script src="/dist/runtime.js" defer></script><script src="/dist/208.js" defer></script><script src="/dist/app.js" defer></script>

                        <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-39521443-1"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                gtag('config', 'UA-39521443-1');
            </script>
                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </head>
    <body class="flex flex-col min-h-screen bg-gray-300 font-sans">
        <header>
                        <div class="bg-gray-100 mb-6 pb-6 w-full h-auto flex flex-col items-center shadow-sm">
                <div class="h-64 xl:h-full w-full">
                        <img class="h-full w-full object-cover" src="data:image/png;base64, /9j/4AAQSkZJRgABAQEASABIAAD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAElYAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////bAIQAAgMDAwQDBAUFBAYGBgYGCAgHBwgIDQkKCQoJDRMMDgwMDgwTERQRDxEUER4YFRUYHiMdHB0jKiUlKjUyNUVFXAECAwMDBAMEBQUEBgYGBgYICAcHCAgNCQoJCgkNEwwODAwODBMRFBEPERQRHhgVFRgeIx0cHSMqJSUqNTI1RUVc/8IAEQgBLAZAAwEiAAIRAQMRAf/EAB0AAAIDAQEBAQEAAAAAAAAAAAABAgMEBgUHCAn/2gAIAQEAAAAA/idMkNkgmmwG4zCQ5jHFkhjEwYAAMBNMACLGnFV000011RUpStsstsutnOTYwJyttvuu06NOnRpvvvututsuttsWWiTq87xvH83yOf5/yMVcUAhAx6PT9H0dqwVRcpTttttutvuvuvvvustustsnO6U5Sn+am5JuRIYxtSBsHJtMkiRJDTBgAME0MEAwSajXTTRTCqA5WzstutstnNtjUlKVl1111+i/Tp0336LrLbLbbLJxzUTsq8/xvE8vyvH8Dx8tURJAIHJi1el6PobDz4OVttl19t9t+i62/RfdbdZdO22U7HJn5iJDkNtsG5AMY23JMkwTABjQwGgABMABEK6ac9NdcRyssstuusssmwaablOy267Rffq0aNOi++y6ydk7JrPQ7Y4PI8jy/M8bwPFxVJpEUDTnp1yqoz6fR9L099WCU7L7NF12i3TfbpuvuutususnO1zGL8sybbZIkE2mOQSGNtg2CYMGCJIYJoABAxQqpooppghzsnbbdbZbKcmJhGRKyy266+/Rq036dF19052WWMqoldHz/K8jzfO8jwPGw1VxAURDJafW6D2Y+X4/k4NPp+r6u/NRO2++6+++3Rovuvvuutttna7JzQEPysyTbZIJNjbGNtqbbQwATYMTGAgQOLAFCmmnPVTBEnbZbbddOyxsUmoiZOdlt2i7Ro1aNd1t9077J2ylTnnqli8nxvK83xvC8jFXGMIpCQEr/U6Tue79jDzvGcbzuDd63revuoruv0X3X336L777rtFtlllk5zGKCj+UZSG5DY5KRKQNjJTGMTAYADAGIAQABGuvPRnqqimTsttuuttlY2IBJRCU7LbrtGjVp1aNF91ltlllkq6J6rs3l+N5fj+H4Hj5IOJCMRIB3el0HYdx33Xbc/JcL824fwavS9T2/e30rTdfovvvv0XX332XTsm5ybiJQj+TpSGSbY22yTTJEnJsAGDQwYDAQAgERhTRTnorgEndZfbdbbObUhIIwhBEpWzttv1adevVq0WXWSsnNQlq00+Z5PkeV4HO+LjgJJARAc/R6Dr/AKB2PS9N7M8PM/Ofmnz7n/Nu9L2vf6HfTddov03XaLr7r7bp2TcnKKIxgl+S5SbZJsZNTYDkyTbGxAwYmEhDENAII1U0Z6KYVpyssuuuttssk5CQRrhXXCATlZK+7To17dmrVpusk5yjbs2V+f43leP4HOeNjrikhAAEtvu9l9H+ndt7Urasfhcv82+c8b4nn06vW97pff2yvu033333W323WTZOQiJWoRj+S3KTbYORMYSZJkm2ANgwAGADQAJRroozU01wTnZbddfbZZY5EhJRhVTVXXXAc5WWXaNOvbq2a9mm+TJWb/QeDyPI8Xnuc8XHWkkCABvV7fYdp9C+hfQPb0UeJzHL8fx/Fcx4nl5KYa/b6Lpel3XXadN9t9t8rLLJuQiKIwgq4/kqUiZICTcgcmyabJDYMY2gG2hAhiUaqc1GemFalZZdovustscyTBQUKaKaqaYVocpWW269m/Xr2bNOm6ZZ6Hp34vJ8jwue5nxslaIpAA4t3+x1H0T6R3nX7fX9fP4XKfOuA5bnvG8nJnoz0R9D3en6vptunTotuunbZZKyQESCjCMVCv8AJZJyYNyZJjkxskNsCTYDGDBACGoVZqM+equA7LtGi++2yc2DHAjCqjPnoorqrrUpSnOzTt379urXr0abLd/rbM/leN4XN834mSsiJAmDCz1eq+nd13n0Xo/fnyvi4eL4L57zPjedkzxVGbHmfq9D1vXdF6mi++y2ydk5txCKUIxhBFX5GmyTbY2xzG5MbBkhyGmwBsEmESNOfPmopriWWW3adN99ljYAEY11UZ6M+eimqquBZOc7LdW70d27Zq023+j7vpV+X4/g81zPh5KwIoATAs9Hpuw7/wCrdZ2fc4MZyPyzj+N5fwfLp3W1ZcNFGTHlt9fp+w7Dp/S02ytsnYEhEYpVqCjBQ/IjJOTY2NtyGTCTG2MkMYAxoHAqhlz5qaa4kr7tV+q+6yybEkJQhVRmz58+fPTXXXCLstnO2/Vt3+lt2XX+j0fsXYPE8DmuX8PHWCBACYT29F9C+6fR/W9I39Nl4bn+W+Q8l4XlUrX6noXY/B8jPRkxUX+51vZ9n0voXztmxgREiKrjCMYx/IDJSchhIbkEm3IZIbJobBjATI105qMtFVcHZdo06dOm26cwERIQhTRRlz56M1FNMIQE75znffq2ehv2afS6bpNWLxfB5nl/Dx1iECAAJaug7L6Z9/8A0H0VnmcDx3keDyXNcTxPj45+362y2UH5fMebVlx48+voex7XuOk22yJOKEnFJwhFVqFf49cm3Jkkxsk3JskpMJSJJjGMbgQz5sueimtOy/Rq16NF105yaSUY11UUZ6MtGfPTRRVXAHKU7pTu0atW3d63V9X6lHj89y3L+HkqQgQgAHo9ztO1+tfZfrn0eXn+P8h+L8fyfL+B42Gt+h0/Rehs87wYZfC8SiinLhz7ul7Pve69vWwAURECMSEIxgvxxKRJscmA25SGyRIJDbbGwbSqozZs2eqEXbo06tWnTfbZKTZFRjXTnz5aMueirPTRVTBBOTnO653X6dnsdZ2vtw8jn+V5fw8dSiJCAAC71+u+kfTu4+i9J1PcT5biPg/xnmPA8fBSXadnT+7b6FnKeNlweVUU0Y/Oo9Lqu47/ALH3L2JNKMUlBKMFXFfjckyYpSGxyBtzGSGSZJsY2KrPmzZaKq1K3Rp16tWjTOycmAlCFObLly0ZqKKKq6KoQBynKU7br5W6fU7DvOij5PN8ry3j46oRSECATLPT6z6B3n0jvOj7Hdzxg+efL/lnKeNgpcpX3z9zobbo+H4NGPK5LNmwYKfT63uvoHY+xaNAowUYJFajGEPxrJskm25AyQ5Mk2NttyJBIjXmzZs2euonbp069enRfbbKbBCjXRnyZsuTPRRRTVVCuKGnOc7bLLdN3o9V9B6uzyeY5LlfGy1wjAQgQIct/V9z331zv+p9nzacnEcjwfCcx4fnUt22uyUdHr7XR5flwIocI0ef5mf1+u7zv+v9ebjFqCjGMVFRUFH8XykwY3IYSZJscm2NuTk04005suammCldp1bNWm+++dk20JRhTky482XNmopqqqhBITCU52XWWXen1P0LsL/J5jkeV8XNCMYRBAgAezpfoP1Tuem+je3rv4zh+T4Hj+Y8Lzc8vT9RZctc3F2WTjmhJKEQtrx+f5dHtdn330Dq/TlFEYxgoqMSKjGP4tkSAmDJNjJNsk5BKRKSFVny5qM9cVK7Vq1a9Gi+2y2UgaUa8+fHlyZMufPRTXCMUIQEpWTsuv2dP9G7jX5nLcbyni5YJRiIBAA7+n+nd79S+4dZp87xvF575xwPKct4HlZ5S19V0Fnmc/4sZwGpSbEoQiaFmw4PIfQ9t9A77p9zSVSUVWkQIxh+K5NjGxkmxsbkNzciTUoVZ82bPRXAsv06tWrTfbdbNzk0EK6M2XHkyZM2aimqEWMacAHZOzTu6X6N9A9PyOR43kfFz1pCQIQAF3t/QPuP1n6J9A9VLmPknKcb875fn/KzQ2+xvu9LVZZ4PNYhSlKcgilBQhZdTnw+R5urpe6+g930WwjGKjGMElGJGP4okxNtjY25DY5E3JtpU5s+anPXB2Xa9OrVfoutsk5zbko1UZsmTHkyZc1FFdSTmOQRQm56fS6f6P8AQ/V8nkuG5DxM8BAgBIBOXsd/9U7/AOt/b/sHq8/8x4b538b4rlOc8nOt2jb6ntaZ46J+TzuMnZNthFRUa4KVlWHzPLz7+r7v6D3HvaEoqshFKKhCK/FEgbkMY21MJDmpSclCrPmz001ono0atejRdbbZORKbkFdOXLiyY8mXLnoqriORMlIIoCfodX9K+k+74/HcJx/h5oCBghoQD9DuPp/377F7Xq/Teqw8l8b+AfN+K5nyMcH63T+pulnjd5flUYPPU7JuQhEYkIRgiGbJh8+n0+v736D2vtTRGMYJRjAgV/ieQm5EgabkMk3Jkoxqz56KK60WaNGnTo0XXTlZJ2MZKNObLjyY8mXNloorUZNzJNzaQPV0P0z6j03m8X8+47xM9aQEkACANPT/AHD6X3f6K+met4HGLyuR/O3xflPFxxQ/c6frd+nnvCzYPArUpysYIAiiEFGEVDNkwefD2ez7/wCg9f6rUStQUYkYxh+JJMbbYpDCUk5OTIU589FFcB23adGjRbfbZOTlJzk1GGbNjyZMmXLnz01RiOY5OY3MHq9/v/qnXZOK+fcZ4eaCiANoEAF3U/QP1N9f7M67raeW+B8P4Pzj5Zz+KtsDd1fUaJeVz2DLhlNzblEABRFGMIRRXmx+f58vd7fv/oPU75wjArI1ijCP4kchkgYxjbchldNOeimuJK6+/RfdddZOTnJyJElXTmzZMuXHmz56aoRAcm5OY5Slo9n6F9Z6/wA/jfn3G+JlrSQAwBAE+i+nfU/o/wB8+7dD4/zDyfJ+efFPmfKc/giRbYP0+k3U5/EyqUpDcWAACiRjGtQCrNi8/Bd0XcfQu96XZEjCBCEUox/EbchtgSTZIcoxooz00wCV2jRfbfZZZObCcpNorqz582XLny5s9VUYxQMcnNuRPT7fc/Ve8y8R8/4vx81MIgNAMBBP2vpf136d3HTfRPpXn8h8l+JeXwXA89hqTBjYS2b7c2ebkxEkCaYCUSKgq0iEMPk4NPTd39A7r39LjFQUIxiH4ek22DGDkMUKKKKK4p23X6L7rLZyk5SY5DcYVU05s2fPmz0U0qCIxBknKTlK72O8+q97Hh/nXHeZlqphAYAAwA9L6R9n+p9/1ns31X+DwXwP5z43PedWAhyFJzlZOyU5g4oGhg0JpEFFVxi7oZsHkYN3Vd79A7X29KUK4xEJ/hpyY2pA3IFVTRnqrgp2X6L7rrbJSkEh2CGq66aKKaKM9FNMIQjFJRQNyc52+r2/1X6JDi/nfHeSRz0VIAGIYKWv6B9s+t/Ruv8Ac0UeRx3C8B834TxMVaTYIkSnbZOcpykhCBCY2IQ4kUlXCKvKs3m+Nm9Tre8+hdn690FGIga/CkySbGMklXnpppriSuu0X3W2WSkSbRJjjGNVNdFNNFNNdcYxjEjGMYxQOU7vW7H6j9Llw/zzkPNoiV56hMBgmNX9v9u+zfS+z97TX5XKcD864DhOW8ygYAxN2WWW2WSlJRAQRHFpsE0JCUVCuM7YUZvH8qPsdj330HrvUmJDakfgqbYSGBGqmiiuEXO266+26yyxpsYScVGuuqmmmqqquEUhJJRjCEIxSdvqdp9Q+maOG+dcj5tUa6qoRAAYIZZ1f277j9R7noNUPO5fgfnHzngeS8qgiwGmN2W32WzlJJpIERGCYCBAkRioQHKGby/Ow2e52Xe/Quq9RsbGpfgRyGMCNeeqiqCnO666y2yyyU5DYA1GEKaaqqqa4QiDYElFKuuuEIRfo9f9L+rehwHzflqcmaquuuIAAwFJ9D9n++fWu96TbVj5rg/mnzX57xvk50hiGA52223WWuUSIkhCEMBNCBoSRCMK0GfJk87Jf0PafQfoPUehKbZNS/nxKQMIVUU01wU7br7bbLJzlNyAbBQhVVXTRVVXXFNznNyk2FcYVVVVw19b9L+o+rwvzHkMMCqqupIAG0AP1vsP6F+yfQ+k2vL4HA/MvmXzjivEzoEJxbHKy6d1tkpqcYBFxQ4gAAJppAhKMYwhFQpy4/Oz7Oj7b6J9C6fdY5Smp/zrbkFdVNFNaJ2X33WWzsk5SCQA1CFVVFdVFVVcETssttstnMHCEaq6Kp+99F+sdBwPy7jscIVxqhFA01IEx7Pqn6P+3/R+p9GNHi8H8x+W/MuG8KiKaQCBu22222U5MGhJCQCaAExDSIgRSUIQiRzZsWCjf0/cfSfoXTbpyc5H835CjVTRVWnO+6+22c7HIJtsAUaq6qqaqqaq6oNztuuvvuutmNQhXVVVu7f6t1vF/KeNwQUYVVxQAMBg7vo/6R+/fUOr9CMPJ4j5d8o+XcDz+dICLTaTssuttnNjYCAQkhDTQARYRaEKJGMIwSjmy48Ffo9R3/076B0+2yRI/mmQpoqqgpW3XX3TsnNkgmNgFddVVddVNMKYQgSlddov1abr7ZoI101aOr+k9lyPyni8ShXXCuCnfCkJAA59t+lP0Z9X6/1CnzuN+W/JPlHzvncyiNAgAnZdZdY5MabAIjEJRCRBgIaEIQkiMIxglDPmwYI+r1v0X6n9A6TVMlP+X9NVNUSVt991tlkpjYxkmhRrprqhCqmuuFRWE7L9OjTr0323WIUKYe39L7nlfk/CYpxrrrrjAd2yOSAMJS6f9Gfpr7D2nsSqycj8t+N/I/m/N5BIQAIk7LbLrJyGAMQAAJEQaEMQhoiIEklCEa5KqjHhwns9n9M+qfQOh0yH/KiquI7bdFuidknJsYNkhKmFFVVKjCFUIxURzu06tOnXfpstsnCvJd2X15fHfmHkk411VwURuV6piwJy+t/sT739D93RE8n5x8W+L/J+Kx1kQQmAF1lltk5SaaYmAiUWgEkxAmJDIiaiBAioxhW1Xmw4sd3Q999W+od37cyX/8QAHAEAAgMBAQEBAAAAAAAAAAAAAAIBAwQFBgcI/9oACAECEAAAAPJIQsTACqQQKAAAAAA9t9rwlVNVawQtdFGXNmz0VU1Rbq6Pa6/W6VzATMVGnWlVGbLly5clGenPTWn0lIFggiIgUUmAAAAALLr7WhKaqUQCEroz5c2bPVUkPo3dnq9bo3tID6ddOPKlz5suXLjzZc+aiqlFj6kkCxAQsCqAAAAAE2X32zFdNNSBEtCVUZsuSimqpHt1dfs9boWs4Daex1tGfz/Hy41qyZcebLmpoqqUY+qKoooCqJAAAAADWX33StVNNSAM7siU58mLJQiQX9br9npXTISaOt2+nopw+f42TBycmfJkzUZ6KoiZZvqokELAKosEAAAA1ui+0SmmmtIGa2+2wRKMeHFjpVG39vtdO1gBrer3unomrncnm4qMvG4HPx581VKRMNLn1gWIiIghYIhQAAGu0aLITPnprgiXu0aL7nRK8vOw482ZNXY73UtkALOn6Draorxc3m0pTRRzvN+b5eehFhphmZvrMCQQsBCxERAAD3ab7YpzZs6LI7XadOm+15SqnJzsOLBPW7/UukAG39/qb9ebDy8FKglNGXkeR8rhRSRgeZ+voQsELAKpCwAPfp0WLTlyUUqS11+nTo0X2ukV1U5ObxMvR9B1L5ACdnoO7oREwcmiJkBKs2Lh+H8znCQeHmfsKwRCkKQKosRLaNWh0oyZc9KwPbp16dOi215VK6acfn+X0O/1LrAANHoOx09VWHmc7NAS0yCVZsHmvB+fqlWlmJb7IhAKpCwCQpZo0aHTNlyUVVhNurZr1X2u0zCV05fOcXd6PqWPIAW9v0XTMs4OTlhoCWZgiK8fJ8t4Th1yxMtM/Z4FgFUFUUe/Te9ebLloqRBrdWzZr0WuLDTFWPznA1+m61kgAP1PSb9Fufk8/GssytMsWVgLn53M8h4fjyMwzH2gFUBYiFLL9NspmzZaqlSCzVs269NzSkKrlHl/MbPT9eyQADb6bemqmrmYlHlZlnlolVCtMmLl+L8Tz4caWb7TBERAKs2X33RXnz0VVpCw2nZt2aLmZBIhKvPeVt9T2LZAAN3e06NfIWrGoDTLM5ICQ6QtWLFx/DeQxzLNLfa1AiFJsvueKs9NKosLDW6dmvTe7EIVlPA8k3qOvokAA0+k9Jtx8enPjVQBrGcmJAUIgTLhy8PwflqJZg+3oAKXXXstOemtUBZZ79GjVazDNKRTw/Inpeu9sgAW+i9V0Wz8vi4FgAl3ZpAIkIBCKMuXL5zwXnKhiPuiwDWX2ytNFSVgpLW3XW2NITNruvF8bHo+tc7AAN3fXda2jmcfl1QAS7PMyAAAQREImXHh8x4DgpBH3tYa66wrpprVIgJe66611WpEGe23B5Gr03UexwAJ63ruzdGDh8ypCAZrGYAAAAiYiVitMmPn+S8Bw0hf0I1tzxVRVWoqg1ltt11hFOfNTWPavAzel6tjvEgB0PXdy9cnG5VIJBLvZIAAAAESAkKtWXFzPF/PeRUfpe1lqopRQIJe617LHmKsuXLRW1vL5/rOu1jPFUsFvrPS6oz8fj0ALEs7OAAAAAAAKpCU5MfH+e+A5q//xAAbAQACAwEBAQAAAAAAAAAAAAAAAQIDBAUGB//aAAgBAxAAAAD1swHMBuQDackDAaABNUU0RLLbbrJObtv169m/Zs2X3TWHi8Xz/J5fOrjNAo2zoyytv0a9OnRpuuvnc5eBmwcmExgTItkZMAAArqooTnbosnah2X6de3Zt16tF9hi43E4fJ5mCpA1DPRPVothG/Vq067dGm26dlifzqbAbk5gxMYNhKIARhRRVF2X32WNsLLtWvbu16r9NtmPlcXjcTm4a4sFHPzebXq6nQ17LbdWrTovtvunKagfOLGASlJjYhkotsACEKKKFK6+66wEoKV1+rbv37NNt2fl8zicjlc+AIUaudycVFvR63Q0buvqv132aLbrW1FQ+cE2DcmSYwJAMAI1Z89SsuvvssYV10whZZfq6HT379McHN5fF5HOjGQKNfP5OCgu39TVosv6/d3a7L7bZklFQh81lMGNybkNNjUgCNObPUWabtM5jSqozUVQttt39bqdDRVk5vI4nPgABXg5HPrjLb0Ntk5Ts2+g9D0brZziCSjD5lKRMAnJkgG2MIU581Zbp032SEQhRmzZqq1Zbp6HY6Npn5XF50AAI4+TixZtO7dttAlOd3S9V6PbMBBFRXy1zG2yUlYwJDFGjNRU7dWrRY5JQppoz5s9MSVt2jb0OjZg4fOgAAsnI5FN1x0d1rQmSlPR2PY+hvaIiFWvljmA5jkpyYNqNGXPXK/Vqvtc0q6c+aiiquuLnZfou7G/FxOfUhgKnj18rlaOj0dtzAQAOerv+07tqSY64R+UuakE2DnNgQz5qK5adOq66Ukq6MubPTXGAozs0aOz1MfAwQEMCrjcTB2d/M19K9AAAhpWb/Sey7c3FxIQXyZg5jJhKUlDPnohO/VrusmTjTRky5aKiTFAs29vs5fP8+CGAQ5fAx5zb3dOiUUAAgYRlq2+p9h1pEYkVH5G03Jjk2iOfPTG2/TotssbddGLHkzVpznY4xn6H0OTz3NigkAsPnKujy7NHU1yUUwBJNtKRZo3+v9b00lFFfyBtjU3JxhRTQW3aL7ZzbaoyYcmamKnOyc7H2fR0+c5YhgCx8KvNm9SVbJsIICLQmnKEh26On7T1exRIRXx2RIByjCimqVt91s7BykQox48mesCyVsruz6WrzvLjFtDDPwOBzNndv27JjAggSBSIk4EyWi3re49PeoqK+NyTkBVRTXZbfdZNjkDppoz0VRhCCnO/r+nr8/zoxGAnVxPO82q/sdvfKQmiAEW4NOUUCci623v+29DeoI+MNEoRooVl11tjsBBFRrqimEKaKY9f1a4XMripMAhxvOcqu7rdnoWTAFFEVKMgEmhpDbsv0el9t3JCfxRpVZ6y26+cphNRIqEW5223TjXmyHpLPO85RSkAR5HmuPTp6fb6Vw0xKJEcRg0kEojROMrbdvqPddSYfD41UVu6+2c5ABGMCClPRq16dFkc/N0z89zYikAEed5bgVW9Xv8AUuBkQiopuIDCUUMQAEpWX7vYe36Mo/A6oO3RZZImCioRIoLdW3dt0Xz5WPR5fmRRF2CDL5jzeFdP0PcvZFicEkm0gAbiSjJIAJN239P3Htb5f//EACQQAAICAgEFAAMBAQAAAAAAAAERAgMABDAFEBIgQBNQYBQG/9oACAEBAAECAf4xsltv2SSXMkgEMSAwBYOHyM3jMzbO02m2Vs7pWmZPMCCCCzhHqsSSSSQACSSSSGJJJfxTbbfukkvgSAQAACSwcPkZsdvKVkrZWSnKyd07jN8yWAgggjCCPRJJJAJJJJJJJJJL+JbbbfCsXyDEhgwAcRJk1nlKyVsrJSlOds7ZTfKhEQ8DExwEGJBGSikkkkkgEAkkkkkliWLF/DNktv2SSxfCPQdhg5H5NJynKyVkpynO2d0pvmEYVQ1xrHWlRKuUcBBiR2MViSQCQCASASSSSSS/iG2237pLF8wwYMHsPVmTSZnKyU5TM53SulN8wjGuuinUr0/8stezXtoshOORMTEg4YrEgAEAkgEl4pJJJfxDbJbfqkkkvkHYdhgwYPQer8mMEclOVkrJTlZO6Vxm+YCNddFWrTq1a8K/xyptqurvrmJAGJjKJiV4oBIBAIBJJIBJfxTbJJfskkkuRt48foMGDBgwYPdtoRwzlZKw2SsndO4zfMBGuuirUp0YadevCsQMTluXZflmSGAxMJQlHPHxSASQCAASSSxfxDZkyX7JJJLibbbbbbwEEYMGDBgwezaEV5SslOVkrZ3TulN88YQpp1adLX0q9YU/h8MlOc7bb7bpzyWHsDGUJQlEpIBIBJJIDEv4hkkkt+qSSSXE2222222CwRgwYMGDBjfcYIAOVkrJWStnfO6U3ziFdFepTqU6tNNcBX4kTlZbZsWbNuzbdOUifQGEoThKJSAASSSS7r+FbJ8mS36JJJJcbbbbbbbbYwYMGDB2HtGAjhnKyVs7Z3zuM3ziMKa9fX1adSrSjpimIcpTstt2Niy+d0rJTMj2S7RMJVyrlDBgCASSxL+HbJZLb9EkAklxksklttttttjBgwYMGDBg7jIwjDDOVkrJ2zvnfKb5wIVU61GjVo1aVWrCMRKFmG6exds3bduxKyUyTiSIIIwZCVc651ziQEAlixfwzZJkS2+6SEQEkuNsltttttv0GDBgwYMHZjIwhWjKVkrJ3TvnfKb51GuvXr1dbWpohVTCNco+Zuvtt2LduzZndKwzwR8DWYEHEQRgMJVzqnXKJGLEkv4ZkkmTfokI+Ij4pcjbJZJLbbfAMGDBg7PIwhUI+UrJWzunsTvM3zqNdevraOr0eHR49MGp+OOV3W2TvnsX7N987ZWmeeEYxAh4SrnAjCCCMBhKqdc6pwwYkv4Vttkt9kB4iIj4pJcTbbJZJLbb4hgwYMYyEK6I15KcrZ3WbE75TfwRhXRTq6/T+n9No1PxfinTfGczsWbs9ue3ftztM3HIwFYp/Eu04zj2IIIyJrnVOqdco9l8h/YMkkyZL7oAAREfFJLiZLbJJJbbx8YwYMGDIQr14VDJTlbO6y+d0pv4BGuirUq1NXTo1dWqMCJGye5dbs2bVmxO+VpmTigKxGIiI2QPaRnh7JEEZCVc6rKbK5RP8G2ZGRLfdIRERERSXG2SyTJtktt8wwCFdWrXQAZSsnfZsTvlN/ABCmrW19SnTp06taMKZQulZZddt725bfO6VpsJ7AKGV9nGUsswycsOJIggjISqspsqthMH+AZJl5Et9wABERERFJLiJJJJbZLJbfGu4AEK6tWrVEDKVs77Nmd5m/gUKqtanSq0dfUrphCvJ4bf9VnUL+qbHUrtmdsrCeyQ7DISEmJGdkiWT3SIMTHITqsptpthIHsvgX6lmXkZNt9kIiIj4gJJcTZkZEmTbbx84xRrq1atSMHO6y+zYneZfFGqrVq1aNTX1K9Sqg0kfmntW7dm7fvWbM7pWGWJL1BjP8n5DOUuBGMoyjkJ1WU21WQkP3TZJl5NvskIiIiIoBLibJMiTIy8jJtt/ABGFOrTpRrc7p327M7zN/DGFWrRpa/TYdNq06qhF/lvus2Ldq7ZsvnbKwyYyNf4vxGBHq/Pz8uMgiQBrnVZTbVZCX7hmXkZNvskIiIj4gJcbJMjIyMjIy8m238IhTq0aMKXO6zZs2Z3mb+ERp1KOmV9O09CjUjR/mlXKcrrNjY257NmxO6VpliUI1xEfGdc4kfCMOHCCJCJrnVZTbVZGX7V+RkZNvuhERA8QFyNmRkZGRkZGXk2/hAjCrVo0K9d2XWbNu1O8zfwgV69Glo6FOpVoU6H4M89q23ant3bluxO6Vpl2jGMBXGsRbywT+IdkQRIZGVdlNtNtc4y/Yvy8jJt90AIoRSXIyTIyMjIyMvIyJb+ECNdWrRoV62Tvt2bdqd5m/hVdGvo0dOr0dTW09OvUFN8djJ7G1uX7NmxZfK0zeCv8Ua4xEQCDjdkpfG8OHJAjISqsptptrmD+ubMvLybfZIRAEQAFxtmRkZGRkZGRkZeTb+BRhVra+hVqZZdbtW7dl5n8cKqNLX0tHpdXTv8FWtrYbJbN+xvbl+/dt2XzuMye1cYgQFP4jj8jIz/ACSn8xwggjITqsptpshMH9W35GTfokAgAFytmRkZGRkZGRLb+FRhVra+hRpAWX27d23O8y+MR19TW6NV0zW09PXrp/FbXK//AGT279zqG/bsTulN+lZryOCRyzCTOUjJ/QQQQQMhOqym2myEgf1Dfk233QACAXM2ZGRkZGRkZEtv4hCvW1+n0aIjO+7cu27LzP4xGrU1+ndO6bVqx6X/AIaD+Q3bG1tbcupWdV2eqW7BsJ9oGqUZAmyU5y8jL6jhBEgQDXOm2i2myMn+lZLJbfdCKSXM35GRkZGRkZEtv4hGujX0aNAQndbuXbk7zL4wKtXW6fRoa2nq6+tR5bOW2/7rN3Z39rcs2bL5WPhhOFv5PIylL7ThwiQyJqnTbTbXZGX6N+Rk2/RAJJc78jIyMjIyZJLfxCNdFGjr9PjXZfdu3bk7jJ/EqtbW6dr9Pp0q9WFGrkbZ7Fu3u7M9+zqF+9ZfKx8kZCfmZfejExlFRlVZTbVbXOMv0DMm2+6A8QElzNtmRkSSSS38YFdFGlr9OhVO+7du3J3E/JXTrdN1um0aNWrCgVrz/wBlu9sdS3eom+exK0nkX6YiUZDISqsptpthMHiXxNtv0SQCXO2/Jktkt/IBCmjS1unQpnsXbt27O4y7P4YV63TdXplGhVqV0Rrwmdt2xbtXbd+zO0zJ5Vi/SnDkhIZCdVtNtNsJg/S2S2+6QACXwNt+Xl5Nt/IBCmnT1+nVa077t27cnaT2b+AR1+n6nStfp9WnDXFSJnZbsXbd23dt27M7SeVdkv0xwiQIBhOqym2m2EhwLFyNskl90kl8DbbZLbb9EkklwgQqp09fp9WpLYv3bdudhPZv4ANfR0+k63TqdKvWjX2lZbs3bd+5duW7U7jL4V+oOHJYQQDXOqymyqyMsS7JczZLfdJLEvgbbbbfqkkkkkl6KFVOnr9Pp0p337926bTInG3zqnU0+j6vS6NKvWjUslK3Yu279y7cu253E8y/XHDhBGRNc6rKLqpxPZdkkuF+TfogEklztttttv1SSSSSSWJRqp09fQp0ZXbG/duysbb+KrX0+janSdfQq1Y1LCbb79y/dv3btuy8y50v15wggjIyrnVbRbVZEpJJJezbb9EAli53jbbbb90kkkkkkkIVauvo6+hKzY37t6Vr+WFWn0bS6Nr9Oq1YUrDll1+5sb1+9duWbBl8CS/YEEEEZGVdlNtFtU4lJJJej8m33SSXxNtttt+6SSSSSSS8YUU6ev08y2OoXb87PV/BGOp0nR6Jq9Np1I0rDk7b9zY3tjfv3bNgz5ksSX7MggjISrsotouqnHEkkuzbb7pJLFzttvG+z4RgCQCSSSWRqq1KOnLY6hfvzt9G/REcS1em9P6Dq9Lp04ULDk7LtvY6hs9Qv3rdkz+BDF+2RBBwZCVVtFtFtc44kkm2/RAJL4W222+MYAAAAMSS9DgjXra+gIbHUb+oTu9G/Udjxa2j0/8A57T6TTpQoXaUrtrZ39nqOxv27Up86SX7k4QQcBhOm3XuotqmMSS9x2HzHsecYOwwYOEmuNcNajZt2L7bfo6ZqaGnr0VVgd7JbN2zfs332zl/HHDhw9hlUqJa06DXg9P/xAApEAACAQIFBAICAwEAAAAAAAAAAQIRYQMQITFBIEBRcBJgIjAEUFKA/9oACAEBAAM/Af8AkvX9T9fr2a+yYxj9h16bep6d1Ut0r1Ou5qSfA/A0U6dPUNf1Ps6ljTbJZ0yQvUVOpj7FsqMsU4LZrpvk364YyxXjKxQplTs16QRTuWVZYXgXgUVsUEKhTJeReS5XofplvJCXTUr2TY/A/BTjNCoUKCoKhTJ9FfTLeVBdw3k5NaGmxYpwURQoKghVy/Eq30N+mW8kinU+ybybG6aG2hGK2F4IiFER8cri8lf009JtjEhdL7Oo2PwPwLwRRE0yoaC16H6cbGxIS6W+0bysLwWKFCghCEk9Ra6l+/0+/NjYkJCXQ32jeTfA/GVM40KFOSi3LleRvn042NiRFCQlm32jeVjVaG2ghIVD4lBU3yuPyN8+nGxsSEhLobH2bY2V4H4JU2GnsJLJIVBZsfpxslIpuRihIQi432jZKRPwSXB5RBcEPBEUBLK5f9aF6SbJS4PJGIkLNvtGyTLCS2K7IsKmw48FMlQo9xeTfUrz1rOnpJsbLEIiQlm32spDfBKmw1wWE+DDS2IIR8SnIqbmo83mxj9KNjfGUYkYoSL5Nle0lIZtoWF/ksfFkY5UKoSRcb5/TXOn9NX7U2N8DfBGJGJFFx+RsfaNk5vRVMbSsRx4KSWgvitBEBIoy5cVNyreub/QlkhFM9fRTZJjbIxWxCIlm2V7Rskxya0MPDgvx1JS4JNbDg9j4iEhfFlJPUuXJPkcuR+mmxvgit0QiJCWUn2rZORYsJSNiEIrQRGlRIXkuXKl8q/rp6PkxvgS3RCCIouNkmPtZzLFhaaFCgkKgkNiitx/J6mm42V5G/7qv2CTG+DaphwQoiGSfbSm9EN7lixbJZfEpyR8kEnqOb3zb/va/XWxvg2qjDw0RRQb5JMfayk9ESlSotNBLgS4ySyQlm/I3z6cbG+B+DDw0RiheRsb57ZsnPcSpoU4EuCglmkULl8qjfppsb4G+DDw9yEFoXJMk+3xMR7C00KcCXGSWaQkXLl8m/TTY3wbaEIasw4LQuNjfb4uI9jyhLgSpoISzSEi5cuV5G/TTY3wWIxVZGFhrQXkk9iT7fExHohydWhKmglwJcCXQkIuXLjY/TLY3wWElWRg4S0LknsSl285uiRiTaqhRpoRjwJcCQsqCQvJcuV5Gxv01KTLH+tDAwVoXJPYlLt29kY2K1VEUl+JGPAvAl0JCXJvqXK8jY39Qr9KcjUfOh/HwIlORvYlLnuMfGe2go0/EjGmglwJdCQkXLla6jY39S2K/R2zyTfFEYGAim2g3sSlz3GPjNUibOS1IQS0EuBLoSIouXLjY36bTZGqMKKrQnFURia6k29+5wcRpyVT+OkvxMNLYiLoZPXUxNdTEruTddST+qsZIfV//8QAIxABAQEAAgMBAQEBAAMBAAAAAQARECEgMUEwQGFRUHGBsf/aAAgBAQABPxDk/Y5zzJ8TyeM/gz89/BjxWseDYiyyyIQhCBZZwHnkFkQhwCCIcAOAgQgiCyNiIzJJwKYL/wBoD7f73+t/vx/7xf8AZ9e537J+u+X0QDYM+GQLIhDEQpClOSEMRdxxnJGsDxAEficH8B+n3+A/g+8bNa1rWLbxkEEHIQhMsg8B8csiCCIcA8AB/mIQIWRZERxuSOBbdfj/AO9loSQhv95/+8P+lh9kfs6X+2cNeX+okkGyyyCIQhCEHwlKUcOKf5ikO0UpwFeQ9pLI8d/8AeD+7+7GNa1jNt3kIIIIIEEQLPzLIIIIIIIRCCHACCCIiI3jeRUxq6JIQJP+yrygF7ZVlfsRWX/luXgRPPyLl4EIQhSFIUY4oOopCEDFO8UN7xcg2LOvXDL0j9DjXzPz3+o/PZjxWsZvgFkQhCBECD8V8A4CEEEEIIdQgggiOCIYtsk3SwmASCHu/wBJNeAYCSVKWf1ydZX5I+WL1E+RJjhdHw8fN1YIpSHEKcUnREOKUORCgjgIKJrhlllhJ+2+B5P9z+nUpMY1rWqt8AggiELnALPDfHeBhiOCIgiMIQiCIjgcF1YOFUJjMgLPg7/fCcHGrLbeH88kZ2dHVpnUWHV1+Q49EGTAcLFeDsfFfATjKEQ5ocQpDgFKQhCkIDwGX27s/wAs4Y8D8jxP3z+5ZjXitaxYecYhCFKQgWWcdcvO22228DEMSjgHAcBERwIeuB4sUwV4dIJdM3CR9gJ2d+zdtttl4fwVlfknxaZs9XUJlmQf+TB6hN6hiFu9uywfFuNTTinWKMcE78BCFKUmBH+OHtZ4ZYwcoFn4H8QfyP8ADsxjzRdtvBBZEIQpDgCyzz222Y8G8BiDDDDKXkAiGHgYjVQnhwIHD/pxGD3GfbRcZ2XLxtttvL45KyMnxKEEEyOrR6sQ6iIAs5E1e7Z7h28SeMgywkdoo+Ep1jglTgKQUCODCFFllllnc8s+uD+s8fn5n8CzHiPFYtvGQQRCEKQhAss894MY15BDgIQeQUpzlKXOw28PiFO+ASC6m9vAR9jPsr9lSmedt/IJWdTqVHV65jQAdWL1AH1ICUgFqe7Ixd92mzvaHh3ccW5BS944pTglIU9YgL0WWshFjZB4dnC8Zw/wj4k3X4H7PD5nOyz4FWsWXgIOBSlKQhAg5L14sYxjXww5RTiHAUpSlKUcG8baZvbCSJ0PLEfYje5X2VLfDfzDiER1N+S9drKQxIYQWBFjYQG9wH26p0Pcha73yUkhzw2/2iwiHNSlKUpCHawsLC7WWc52eDPDtnnv5nmPO+HXicvk/g8bIniseKrgvAQRClKUhxBwHGeSzGtY1rXjPBSkIp8FLgShhhtgWRjJQiIYP+3v7v8AeVmX3Lbf2JlkfJWdRAfUII//ACUDI77LdEKGbCHuHvGdXud3uZ+8TNqSYxIcu3wESh3wHJkFCgjgCCDjOMb5Ml94+7d8Pif+BP4d4PBeKvgzeM7giDjikIQmWWWeO228DyVrGtfCDgIQinxXgF1KG20yLCuoZ9vb3f7Qh7ikfsrN39slWV8kyCLBgMnQIZgL1YJ+plE+2Ngu57o2u53hdgpg5PINJLHhwS/3toniOCUMEQIVhB23fHXD4ZZrOTtkndnB+5+XfkR5H67MaPItYx4CIOOYlIQmfhtpLInitaxrGMeAhCDDDDOc+K5CJpmixgOE/wB739wG93+831L9Srf3E8Y5J0ouJkHUFtNCSYlZgvacnS2vd8dnbO/eBo1cObs9WHAJ5Akw+HP+9tAfkCDgK9IgWWcZEGTmWctnLlnCPifkf0E+byss+FR4tt4CKcQXAQpcsiwss8dlmMeK81a1jGM2G2G2GIZznzDGWFeI9axfEhCEXfcR9st7mdxmZ/gEYJl9cOAQtEDOJt6ohDgRY9xl3fLYBd3tErvd/tMtkal4Ub15nCTwMSz58+oEJDCIdomdWWc4z8vnh7mR4SyyAkcvZ5nn1H7H8azGNa8VjFbI4JyAhSlJlllniyzGNTPFeSsYx4Nt5IhiI5XKIlkvV2mnFaQQYj7Ab3B8ZmQ+5b/BkgdSuSBhPaginikD7Eseoo9Siwl7sz3L2LGrDERoMivc0thrFCkX/IR8lwcnHj98knjJjzOv2NCewRAsss5Sy73h8OuGSeSfiPkfufmeOz4FHisW7gheCgRClODLLLLOXjZ4DWvhQY1jFmb45EFkEeJbljqZkL6sCAvdGfY/+ypH7KX+DJ/iWOpmRyTreljdQMwshkJDC3AIYvd7MZE93/RO/Z2Vu7V3HLlDe2GMORuwGPczHmvqUvTxdJGh3xBZZ4Bd2RZwknhlhfeHuzxPA4PA4PxP4lJj4QWs3jIh4wApSZZZ+CzHgvNGseKxjGL4BwEQQWQQQQmsbCYNI/s4QQ9xn2w3u9uNsSLOp/gV+XzpdOrfIoIejDHRPBdnDbN7ib3FkRiIrP8AS2+zWrbB3yB2XzDhCnnLFkmrwj4H/VjYZ3enu6i2EScNlnGX2x2ThsnhI5ySd8j+Ajw38Dn74qTyR4LWbwEvkiBSnBllnksviKta8V4jGMWXxyOMgiBBZJLLHVm6QBsFEe4z7Gb3BnTfQmZjbzv6CeGbrqymdKKB1YvVmnVnIdsX1CO0kgdx9ZEVYr9kWW15EHCxs4ksWHGDds3eywskTi1JpoUbCck67tA7jQgYONbxlndhx1xl95zqeHeHRPJ/Hv6HkswJ4jWvIEPwAOCf5iEJnGeayZ8YI1rWsWYtvkckFkEEI1MTxpEGkb0Sa+xCb3e/GQcZ37LxsvL+YTZ1Kp1eme6g5ADsvbELQcT/AFgKEb3KDGGRpiO9yP2R41wJlnhnOcO33k1d4ySzlIPAPCKTE96O40LeW2X3j48ZO8MzZY2Xd34J+fy3+M8tJjzRjXiXgg/EAOKUgWWfgx8qIPAa1rWbb+BBwQQQcHriXOrCUhzCSQH2/wB5P+zHuZ9lNstv7BL9FgaSIiQaAQFsBdWUQShN7h/7Jj3K+yt7v9537Kyoa20bPU/4s5DwYYZCiNVeMsJ8Q6k8P0GxvX3dh3G5aHuHTnJmOUxs4ft3fLCwnLJ9fmfjv77LJ4HgNazYiHhAEcBShBxngvDbP4GABjWsYzbf0IIg4xA6bpIvTJNE+3c7j7yfemfsxbbbf1yc6JE6mBChaWjJB0lGYlzoOYoh9xgxtY/fc6vdqvcz9lZdhW7RISIS/wA5XBiWWHjGCyCzjrjOduxCPN4Ni2aXr7uo7gSKG/7ZPCcvCcZ4p789t/I/g2Umq5BrWa8BD8BTgkCCPN4WY/hAAGNazbXzfE5Dg9ITRPWiKOvUjhbF33e3u+9IzNl8c/P0hOnUnUCKJskshs9XFsIkvrRITuQMhG8NlZ1l2y24Q56h31LwDtEih3xvAQQQeOc5PC4fBU9Nkl3Hd6O4Ou437E8/JOuWyzw+zJfZ/oODy2Yx4C5rN5OSHEKUgQRweazR8wQHkLWLbb+xJfOlzqfpYb6JT+QDCb3f733pl9ym2239xMkdSpwznrCQ+JwhfRegMi9SOxGHoWhFV3Ofcj9mZkqBZ/zjBMvCNjZ45LSY8hZBY+XXjnArZXd5LUkGwSCDDuFzu24ySZ5Tl4eOpldiOH8H99ttmPEYxrHkQfkIhAjg5PIwPxDEBjXg3xPzFOep8jKaR4oWfBDvcQM0Hu1u5vqXz38wlDCQml2iDgsGdKM3C0lhCHuD0bcdkPd7wmhE77kd7mZF5KPC/wCaR+Qx9W4V68Yiz/q0l2DqyCzyyyzl8X3PcPA4cbJ4/RK5da24yS9cPlnLn8J4HBHgsxrwGt222yIcU5oQLI4ODy2Y/jABFrGLyfrkcATJmTB0gejqB9x9xS5G3udL/H8yBixwsIY2d09Y8DnonKNWFgbuYwPsO4OWaL3K/ZUrwPd2R1IlEMEbCCnkmVaeAgs4+fxJ4liRmEu8lMxugbW25fXksWc+pjxP4S23g1i5rHkEa5U4pAgLIPHY43jSxPMf9fIAWtYtv8GTHqZOod1BthIARb2WG9yq4yz3Mpf42OidFIHfabMMfwuoY2MAMZe77F758mYRiYjN8IsrGSPniw3Tf62Z7geJ5WQQcZwcnk8vuzhvs8DxJMrNL0d3pvT3bxHbrxS+xbLz8/hPLSeK8VrwbwEcQpSkCCDjYtt8N43g1/AEAtazZfE8t5OAkZ86sWmjAfR6t/uMcZHcZz3Oy/xqdE6dN6dmGQl1A4y6gbGvovTWu3blM0vUzvdzKxXe5op4fMUlRKF6+53Zkqyrxln8D4PgMwhyKY2LYy9d3r7tgtAt4bJ/FeT9jgttmPAa1i8YwMcUpSkCCAjg8C22220mvkAB5qxi/wAAQMz8lTqRJmMZYLV7yA3Ip7t3udKtt/hEyRhb4sAyAgviHDnq1l9mLe7QN6mTAZRIScWdM+9LbX8zSQ5bt9ssg538SfJ5yyTnJocaShkJDL092+dx+jwb9v8Al34KcPDu5BZ7jz3k4PHbZ4jWrmbwEcE4JSECPDbfHbbeDGvnBVaxZfzODxVkfViQAQs1hFe8jDjKXG0e5WWWW3+DIIQwIgMoGUQKOHUawEN7sgT6eBh/nS/3n/7xCv4niyCBiyDwC7/lZ8A6k8AfTYSid3+l6yMROT6m6yfLCZnB+hxspNa1rNliBiFOIUgQcZ47bztts9OLWPFa8VrFl4bOM/E4OAlZsAkzZg+hDOjS9X1DrG0siD3IYmYv8OERm8IRJhTCCB1CFgHqJ9iHuEs/t35qdrZ9zyrPf5fYgiBEyyCDxeXj5yfi+SeBPAc6KMw3+l6YEO7YPHPfGcYyWWH7bweC1rN5IclICCCDw3y2LZeDGpmMY1Uxi8NlnGSSSWWfgEqyXqWNjMXN2XNyeB1E2LuMv3FZ5MX+B8A1nzHAIguQQwdREY+QBARhgNnun+kujZT3K2/oEQIOBMsnzfx6/R4eMht2YeBmExZpY53aHuVlp75yyywsNv8A0s6ngflvBrzRm28EFFKQIIIOTx3w3gxrWvFa1rGLxlnkB4Mskkkss5R+S/q91Mz1P+wY1gYhNm/jKdsrxsxiy/hnmi9EM3BC7U8bQiCA5wgBOREB7iFydjPcRne5D3I2/qEEEHAILOfn6n7PDZJwMMJQecysEvV3enu3Du2IdJXDO/UGzNWWdWflts14rGLxkQpSZEIFlkflssvcxc1rWteDbeMs8gb5GPAxJJLIa3x7GWMuP/uKMbBZ6iFnTjJ9vJLMYxf2yFsTxZdo6MCceDZ1CerAT0wkS9xmz3z39pExx7lfv4vjkQIIILI8nxfwf4O+HjZYQ5pMlGUs87uw7hc7jYgmYNngD8GyzGNYsvARwSngGWfgcltsx4GNaxjHg3kIOQ8XteBjGJPAn6myaZm4Jh1ZK4GOop1VnXFrFlt/fIAPFNTA9MMTEgnqCTGfYN7hb3F3Q7jqxd7nPuf1CCIQIIOd4f3znP16nlmeEh4F9jZWeXq7vT3aBbhA4f8ApwIPLMcy3jeDWtYvIRxSggiBZZZ+jNmMY1jGMZtvBBBBEKU/D7YxjFJOAoDWEYB/yzgNIQa6imHVlSyyyyy2/sERUyI3fyCsgzigOCkmQN7gbPbffH1E3uct39CCCCIQmcHip5P9rPgniEijZNll2Hd6+4EO4kgcDm+16eGzGNeJeMiFKUxBZBBZyH46SzHgaxjGMYtvJBBEIQhTjee1rGs03UC3Tst0j0f8sWBbMfSZRSGqy8bLLMX98lwRZwYGdIIUeQwgh64We497gHJjHcxUx17mHu39cWIQIh4Hf6v87w+ScpJ4HDjYtkncojejvhMSPFmuNmNaxm8AxClKQImeZ+DGMYxZjNlmLb4hBBDgIcA8gGsSa6I0aK/8JIPXHyljCGCXRSTqttllmMW3gIOcD+Ql6Ix3FHJ7RGDY0+HBJOAfuPe4u72MdRp98Uv7ZBEEQOevw3+Pfxz9knkYljYsxnd6e4UhxaEcBriVjWsXkI4JSEyyC6/ZjGNYxjFZZZfIgh4gAgQo4MssksSeBKpjv/kKL/8AqvhdsiIFsiZvud2y2zGLb4hLEh+AbCzY/UiFlggGy4f6glkl9+Ne7HYXc12Lvct7tf1CBiEIQIn+B8Gzyz9XzeGfBIcmJJiTS9NvkCF6+onpyqy2vJAQICEHBHP2OHwY5Z6tZWTL3JlbZZmXh4efsQ4AcgiDgIm+zMNm2EAZsJG1PbKlAniiLZ74+cqy+XzgWWY8SAnoelmmItlGGEY6IJ9yQCCYmeEqrantGeXxOfvJBEQERw+Sxb4Pjvh98mZ5ePt8m++D4fOX3PH2ePl8hAziSfc3bQd3Tsh3dLuahvAO4LC//8QAIREAAgICAwEBAQEBAAAAAAAAAQIDEQAEEBIgMAVAE1D/2gAIAQIBAQIAPzPo/wAgUIEC0SSWLFr8EklmZmZ2YsScOHOixLFFqxaiasWqqAeQCpGI4YsWLs7O0jSNIXMhkLs5cv2/4YUIEC8ElixYnycJJYsxYkk4eOoQRx60WtHDHrqgHkBIRrNC6HCyyl2kMjSNI0hkaRnLly5fsSD4P9lBAgQLhJYsXLeao4cOMWLE4cOEUECxwRa0UEeqsdeaSKLUTXEMkM0bqwYiVpGkaRpGkaQyFy5ftd/Q/wAgAQIEC4WLFy5a+aChevUqVYOGDYcqutJFHrxa0WoqAeaSOHTjgSPq2SmbHDCRXxpGkaRpC5cuX7Xd4PZ+FfYAIIwlYWLly5N3wAECBOnToUZXDBgwqjixx60erFqKleaVIdSPWSLpbSSSySuzAh1mSTGkZy5cuWu74GDwfifB+YARYwlYWZy5ctfIARUVAgTp1KkOHDY2EMQscEWpFqLHXpVh1IdRYepLSPJJO8hwgggiWPYilDMXLFr9X8D/AAhQixhaJZ2kaQv2u8GABFRUVAgWsIIOPjhg7Myww6kWmkfsCLWh01RMtneWSdpvBBVlZZ4tmCUE37uwfB+B5r0FWNYwlFjI0rSF+18DAqoqKgQIFA5JsljLJJOBDqQ6aR16Ai14NKOD/MjuZpdh5bwYcGVXUqyumzDuazrxd8jix6P3CrGsYSizSNI0hctfAAVY1jEaoECgcHCSSS0k0+7cWpDprGB7jhg0EijGF3eSdpieR4qiCjRyR7Wvs6zrxfI4GD5H4ABBGsYSizSNIzlieQAixrEsaxhAoFeSZJZ98tDpw6SpVekSDRi1kDIziaTYecnK5AyuaAYOsqbets67D0PlXNcEUEWNYwuM7SM7OWPilRYliWJYwgWsPA4OHJJp/wBJ5YNKDRVK9hYNOHUCq/ZpJZGnJ8AcVXo4wdZY9zV2YCPI/goIIwgXC5kZyxJ8ABFiSJIljVAvB4PNyS7X6kk8GjBoKnxhgg1GCbAmLNPJOW4rDg4rAPgQ6ss0W5rTRHmx8K8HgAIsYTqSXZy5JPNUEWJYkiWMIFocng8NJtfqS7UGjBoKnxh1o/z2hid8fI3knLeLHFAV8qZXVl2IN3Wlj5HA+dBFjCUSXLlieaqggjWNY1QKBXtn2f0pt2DQg0VQD4RQa35sWsI5UZf9nmJ9AVleyDg8EOGDLs6+5qvHwPB9hQioFwsXLlsPiqChBGqKiqMBu7u+GbZ/Sn3odCHQVaA9pHrfmxaqxnGklnlnLD2ABXyPB8MGUh029bc1mUcXd+QAgQDCxcsSTzVAdQgQIFrO3bv2DBgbLbH6Ox+jDoQ6SrQHtV1vzoNNUxnlnl2mf1QFVX2Pgqyssibetta5BNk3lYFCBKsuXLXl+KChQgQLWElu/fuHDhu8+/sfpRaEGiF6gewINDW0VjBMkk8u28mV4AoCv4a8MGVllj3NXagbO3btgUIFwkuXLXwfAAUKFCgAYcJZi5fv3Dhn2Z/0otLX0AAAKJ9Qaet+cseFpJ5dt5eTzQAFfznhg6sssW7p7MJPbsFC4SWLWT4OVQUKFCgAcsWLMWJuxk+7FFr6AAFDKOHB4jTV/Njhy3km2Xl8DisAr+qsYMrLsRfoa+whN//EACQRAQACAQMFAQEBAQEAAAAAAAEAAhEDITEQMEBBUCASUQRg/9oACAECAQM/APivlrCMX1A5gwIH/gHy1hFiypB4J/sDsWtHETub/wDhV6MswMR9EPcqcHYtboEIYgL1T6Z23wLLAj6IHMDsWtwR5SVPUIB0Pyj8x/B5bZm/EXEDmBwdheCKmZUhAgQIRf1j5L+jyCLM8xcYIHMA2OwstZ3hWYmJ/PQ6L+snTHR+SHk1rFjaP+QOYV4OzezxCswdCYh7elmL2MkTMfhv4IeTSsV2lrS1vUqcypwdm9/UCVDibTExMTaL3MjGYfgL+MQO09+tTdi7Vl7svZJSoZJU4Oze7sThYV9QhCECL3M9cjtGq7RH4IeGfulTdhuUmpqO6svbGSVqbkDg7NrOxFwsrUNoErMTbeBFi+COYi7ecQIdp/R2aUN2VNqTW1Xdl7spTmAbHZXglrO8KnE/noEIDzFi+GIzeWF8d/B5dKm7KGSrNbVeWal+ZShvA4O03ZQn8EsStpiY9xYvjCR/yNbPiP5IeTWpuylNq7s1tZ5ZqaltyadPUA2O1qajxtAOJ/OxtMbStqxFn8xeI+SWHabu0/l8J8Y7FQ3ZpUzhmtrOCaupuk09M4IHB2tTUdiA5sZgepUhCrMTPmlhnO0TwTwz9HUOWaWmOHM1tZxWauojaaVPWWAdq93FSZw3lKhtAgQCB7g/AEdphyHywJo6Y4czW1bYpNbVc3mnp+u22cBL3w2lKG1YHQDovEbcvwczMavHyAmnpHM1dVxSa2tYbZxNLT9Z7azVvu7E06BgIHSpCPplrfEyQR2jVmOh1fgU0zdlrZKT/p13NuJpaRxl7mtqptgmnQNssqHQIHS9vfxxJn1Gq7fg/L3DvbZjQ2Jqf9FstsE0dMzjMA7be2CaZhtuytTrgiS1vlFiVBn83xN3p//EACARAAIBBQEBAQEBAAAAAAAAAAECAwAEEBEgEjATBUD/2gAIAQMBAQIAHI6HQwMH779Fy5atBQoULrhVVFjVERI0REUADBke6lupryW8e6kui3BxvYNMnnyqBAioIwioqBAqqFCBfNDkfMUcjA+nouzlsBQoUADgAKqKioiKiqoAAovJcy3Mt5LdSTvOz9EtL+6yq4IDIEVFjWNY1QIEVQoUL51rXe+RwMb5I62XZy5agAoQIF1qt4FKFpAgVVVQtChReS6kuZLqW6kne5aTe8mtvJJcmb9UeNlKlR+axqgQIEVAoTwABrBodjA+IyaHwJLly5agAioEC6o0K369BgQVZChQrS0K29xJcSXEtzLPJcs3OyWkkuZJ2kJAiEYSgY2SggRUCBAiqF8hdHGj8N5HJ+my7Oz+tBQioE1rJJYt79hw6urxshQoQWlknlnkuZLmW6Z6PReS4knab0AqRRJGoWto0LxkIqBQoULqjnRwMCieN/AE4HRJcuzk6ChAgUDVCjWyzOzly/sOHDxNGUKH9GuGmluJLqS6Z+yXuJLhpS3lY0hSBUGAaBie3liKgKABRwa1gjVD4DB6FGjQ49F2kL7AVFjVAoXWqNbLFy7OXLetghlMZiKyCX9Hmku5Lpn7JeaS4JddBEjSFU4FbBBhkt5oyBWjWskUcjIreR8Bwa9NIZGfYARY1jVNURRolmLtIXZ2YnGlAVQlJSKWluZbov2S80t084fflYkgVKPQIIKtBNazow4PR7HGx8NlmkaQuSFVFjEaqBg0SWLly5cuWJo0AAAq6SOK11LdS3bPgdPLJd+ZoaVERIRHgUfhsMr209tOjUa0QMa1RGB/gLNIzl6CrGsYQLoCt7LM7SGQyF/RPAoUoVIbMLLdS3Rb4O8t7Jcs0M/hreOBItfQ0KUo9rcW860BqtZ1Q432MA7LmRnL0FVFRVAHBJYyNK0pkL+97wcio4orFY5ruW7LfAvNdy3e2RFiSMLGBRPZocmhSmN7W4gmHWiKHAofDZcyGQtQQIqBdDOyS7SPK0rSF/WxQoUKONLHb/zo4Zrya8ZhRwOdzXE11CjWL2wSO2SALR+A7BwCDFLaXEMorWDwOxgGvRdpC5OggRVAGN1vfppGleVpC5bAoUOAkH8+K3mvJrwt8ZbiS+SWeG2aNp1SAKODyaFCjkdCgVME1pcRSDg41Q6FGtly5fYAQIFAGRW62WZ2dnZieRQoBVhsYrWa9lvGajQwaHEk099LO0sEiFbZIQOifmOhS0DbT2tzHJWsEYGDx6Zy5agAgUKBkVve/TMWLEkFfBTxrVCgsFjDaTXst4W38Hknv5bkyUlvFawwAHJzvjeTgZPQIIKm1ubW4RqOdcbJLs5bQUIFA1zve97Jor58fmIzGYzGUCwWMFjLeS3ZJJI7Z576W7eSo4oraO2CD5n/AAjAIKPa3FtOpxrjZcvvQQIF1rnZbZbfqgAojEQhEJhMTRskdrB/PlvprwneD0TPfTXrzbSGK2itVTXOznZ42MCj9QQQUktLm3nFaIrZZnL7ACBAugOd7one6FAKqosYjWP8zE6lY7KS7nvPlua8uL9pdpHDbRWqxcmt7o/LfR+AwCDFJZ3UEoGtFi1ABQuhgdEk+t8CkVERFQIFImuEimlnvdk7GRzLLdX0kzUohggtEi62c7OR8BR5HwFDAIMEljPEwx//xAAlEQEAAgEDBQADAQEBAAAAAAABAAIRAyExECAwQEESUFFhIgT/2gAIAQMBAz8A/cvQ7a1lZ/Gf7F4lj7Fi+PM3/Q7dm36nEKm8rjmf1jLPEfrP5F7yBCD4tv2T6ocwCf7A+xfs/rH5LPgDs37M/pd/RfWCWXmB9iz+sWL4A6L0Xo4Jt2ZPDt+oe09OpF+xI/3Ew8xWL4AhGMXpmLA7h/Rbd52MX2Kken8gcsV2i+AgTL0zPyj0xA7sM3Jn9OHVi+th6BFiQIfbReI258IReIv2WOGMcRxx0Dw7kEJnHk29x9mzxEN4VgfYvEs+GpFi/YMzMm5FegeTCQmT3tuh2LF9mzwTHLK0P5K1NpZ4YvL4a1+zLjM/Ilq5cxzGWZtA8/G8E5gnuh2vnfFazsR5tNOhsBKVHDLWeYvhrU3YfI3eZb8iLUCFif8AWxP8gekkHG/i29VY+LHnvZ2Jbb8ppaVSVqS1naK+EJWptMz8okWJbaWxCHpok2IIert3r7VrOxLOG009MmnQ2Ze7tF+9du4laku/YajuzSSX0kM5J+RMypD1kYP2CE29h9peCXtztNLSrwTTobM1L7ZivipQm8/KLVwy9LStg3hcAgQD2WrDBvPyPVzHzsfErsTUvjJNLSJp0Nmal/sV58VKcsZn7LMsQsTMx7e3Rqk25hY851X21mpfCmCaOkZtiadDaat3nx0obsMOGL9isVlljPxPfxESZAzNvMxY+k+BWal7GTE0tKubTS0zFZqan2b+KtTKyteI2zvF6LP8gQP0OGBMmc+E6sfWO6+ozS0zNmaOkYrNXUeceMCUpsby1ubMsxZZn+QPkD3NvAjETeFgOu/cvuVDeN3FSBvdn/n0TFeZq6jzg7N+8mnpjvll7vOIqxZazONoStfn6dGbcwtU7XsPVOhCE/FxU3jq2/6tKaAYrlmrqPMfGadcs1HY2llemYKSsrXv39Tbzoktkmadf//Z">
                </div>
                <div class="-ml-56 sm:w-64">
                    <div class="shadow h-32 w-32 -my-16 border-white rounded-full overflow-hidden border-4">
                        <a href="/">
                            <img class="object-cover w-full h-full" src="https://gravatar.com/avatar/f7a23636c530faa0ceca6199226902e7?s=200">
                        </a>
                    </div>
                </div>
                <div class="mt-16 sm:mt-4">
                    <h1 class="text-3xl text-center font-bold">
                        Jib√© Barth
                    </h1>
                    <p class="text-sm text-gray-600 text-center">
                        üá´üá∑ Web developer
                        <div class="text-center">
                            <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-github text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-twitter text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://linkedin.com/in/jib√©-b-772884a3"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-linkedin text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-symfony text-gray-600 hover:text-black"></i>
    </a>

                        </div>
                    </p>
                </div>
                <div class="mt-4 pt-3 flex flex-wrap mx-6 border-t justify-center">
                        <div class="text-center mt-1">
        <h2 class="block text-gray-800 text-2xl font-semibold">üá´üá∑ API Platform, Oauth, &amp; Swagger UI</h2>
        <p class="inline-block text-gray-600 text-sm font-base">Published Jan 11, 2020</p>
    </div>
                </div>
            </div>
                    </header>
        <main class="flex-grow">
                <div class="flex flex-col items-center">
        <div class="bg-gray-100 p-6 w-full max-w-4xl">
            <div class="markdown" data-controller="code-highlight">
                <h1><a id="user-content-api-platform-oauth--swagger" href="#api-platform-oauth--swagger" name="api-platform-oauth--swagger" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Api Platform, OAuth &amp; Swagger</h1>
<p>Aujourd'hui, nous allons voir comment utiliser une authentification OAuth, pour notre projet API Platform, √† travers Swagger UI.</p>
<p>Cela nous permettra d'activer plusieurs services OAuth, tels que Google, Github, ou encore Facebook.</p>
<blockquote>
<p>Je pars du principe que si vous arrivez la, vous connaissez un minimum l'utilisation de Symfony et de API-Platform. Je vais donc passer tr√®s vite sur l'initialisation.</p>
</blockquote>
<h3><a id="user-content-toc" href="#toc" name="toc" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>TOC</h3>
<ul>
<li>
<a href="#cr%C3%A9ation-dun-projet">Cr√©ation d'un projet</a>
</li>
<li>
<a href="#initialisation-de-la-plateforme">Initialisation de la plateforme</a>
</li>
<li>
<a href="#cr%C3%A9ation-dun-endpoint-de-test">Cr√©ation d'un endpoint de test</a>
</li>
<li>
<a href="#r%C3%A9cup%C3%A9rer-des-cr%C3%A9dentials-oauth-pour-se-connecter-avec-google">R√©cup√©rer des cr√©dentials Oauth pour se connecter avec Google</a>
</li>
<li>
<a href="#authentication">Authentication</a>
</li>
<li>
<a href="#un-autre-oauth-provider--github">Un autre OAuth provider : Github</a>
</li>
<li>
<a href="#plusieurs-oauth-login-sur-swagger-ui">Plusieurs OAuth Login sur Swagger UI</a>
</li>
</ul>
<h2><a id="user-content-cr√©ation-dun-projet" href="#cr√©ation-dun-projet" name="cr√©ation-dun-projet" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Cr√©ation d'un projet</h2>
<p>Pour notre projet, nous allons rapidement cr√©er une application symfony avec API-Platform</p>
<pre><code class="language-bash">composer create-project symfony/website-skeleton api-oauth
cd api-oauth
composer req api
symfony local:server:start -d
</code></pre>
<blockquote>
<p>J'utilise le website-skeleton pour avoir tous les composants Symfony, et ne pas a avoir a faire de multiples <code>composer require</code>. L'utilisateur aguerri partira bien √©videmment du <code>skeleton</code> tout cours.</p>
</blockquote>
<h2><a id="user-content-initialisation-de-la-plateforme" href="#initialisation-de-la-plateforme" name="initialisation-de-la-plateforme" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Initialisation de la plateforme</h2>
<p>Premierement, nous allons alt√©rer la configuration d'api platform, pour repasser sur swagger v2 plutot que la v3.</p>
<pre><code class="language-yaml"># config/packages/api_platform.yml
api_platform:
    #...
    swagger:
        versions: [2]
</code></pre>
<blockquote>
<p>Cette √©tape pourra √™tre √©vit√© quand <a href="https://github.com/api-platform/core/pull/3333">cette PR</a> sera merg√©e et released.</p>
</blockquote>
<p>Puis, cr√©ons une entit√© de test :</p>
<pre><code class="language-bash">php bin/console make:entity Book --api-resource
</code></pre>
<p>Et une entit√©e user (sans besoin de hash password )</p>
<pre><code class="language-bas">php bin/console make:user
</code></pre>
<p>Et on met √† jour la BDD.</p>
<pre><code class="language-bash">php bin/console d:s:u --force
</code></pre>
<h2><a id="user-content-cr√©ation-dun-endpoint-de-test" href="#cr√©ation-dun-endpoint-de-test" name="cr√©ation-dun-endpoint-de-test" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Cr√©ation d'un endpoint de test</h2>
<p>Nous allons cr√©√© un endpoint de test qui se contentera de retourner l'utilisateur.</p>
<pre><code class="language-bash">php bin/console make:controller WhoAmIController --no-template
</code></pre>
<p>Alterons ce controleur pour le rendre invokable, et pour retourner l'utilisateur courant :</p>
<pre><code class="language-php">// src/Controller/WhoAmIController.php
&lt;?php
declare(strict_types=1);

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\Routing\Annotation\Route;
use Symfony\Component\Security\Core\User\UserInterface;

final class WhoAmIController extends AbstractController
{
    public function __invoke(): ?UserInterface
    {
        return $this-&gt;getUser();
    }
}
</code></pre>
<p>Allons modifier la classe <code>User</code> pour la d√©finir en tant que ressource ApiPlatform, et ajoutons dedans notre controller.</p>
<pre><code class="language-php">// src/Entity/User.php
&lt;?php
declare(strict_types=1);
    
namespace App\Entity;

use ApiPlatform\Core\Annotation\ApiResource;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\UserInterface;
use App\Controller\WhoAmIController;

/**
 * @ApiResource(
 *     collectionOperations={
 *          &quot;get&quot;, &quot;post&quot;,
 *          &quot;whoami&quot;= {
 *              &quot;method&quot;=&quot;GET&quot;,
 *              &quot;path&quot;=&quot;/whoami&quot;,
 *              &quot;controller&quot;=WhoAmIController::class,
 *          },
 *     }
 * )
 * @ORM\Entity(repositoryClass=&quot;App\Repository\UserRepository&quot;)
 */
class User implements UserInterface 
{
    // ...
}
</code></pre>
<p>Je rajoute le controleur dans les <code>collectionOperations</code> , mais il conviendrai mieux dans <code>itemOperations</code>. Je ne souhaites juste pas m'emb√™ter a devoir enlever le champ <code>id</code> du swagger pour l'instant.</p>
<p>Si on ex√©cute le endpoint <code>/api/whoami</code>, on re√ßoit <code>null</code>. Parfait. Passons √† l'OAuth.</p>
<h2><a id="user-content-r√©cup√©rer-des-cr√©dentials-oauth-pour-se-connecter-avec-google" href="#r√©cup√©rer-des-cr√©dentials-oauth-pour-se-connecter-avec-google" name="r√©cup√©rer-des-cr√©dentials-oauth-pour-se-connecter-avec-google" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>R√©cup√©rer des cr√©dentials Oauth pour se connecter avec Google</h2>
<p>Notre premier authenticator sera Google.
Depuis la <a href="https://console.developers.google.com/apis/credentials">console developper</a>, cr√©eons d'abord un &quot;Ecran d'autorisation Oauth&quot;. (Il n'est pas n√©cessaire de renseigner les domaines pour l'instant).</p>
<p>Puis, toujours dans cette console, cr√©eons des identifiants &quot;ID Client Oauth&quot;.</p>
<p>Ici, il est important de rajouter une Url de redirection autoris√©e ainsi en adaptant votre domaine:</p>
<pre><code class="language-bash">https://127.0.0.1:8000/bundles/apiplatform/swagger-ui/oauth2-redirect.html
</code></pre>
<p>Puis on stock notre ID et SECRET dans le fichier <code>.env</code></p>
<pre><code class="language-ini">#.env
# ...
OAUTH_GOOGLE_ID=&quot;monid&quot;
OAUTH_GOOGLE_SECRET=&quot;monsecret&quot;
</code></pre>
<p>Completons la configuration d'API Platform :</p>
<pre><code class="language-yaml"># config/packages/api_platform.yaml
api_platform:
    # ...
    oauth:
        enabled: true
        clientId: '%env(OAUTH_GOOGLE_ID)%'
        clientSecret: '%env(OAUTH_GOOGLE_SECRET)%'
        type: 'oauth2'
        # The oauth flow grant type.
        flow: 'authorizationCode'
        # The oauth authentication url.
        authorizationUrl: 'https://accounts.google.com/o/oauth2/v2/auth'
        # The oauth token url.
        tokenUrl: 'https://www.googleapis.com/oauth2/v4/token'
        # The oauth scopes.
        scopes:
            email: 'Allow to retrieve user email'
</code></pre>
<p>Nous pouvons maintenant tester l'authorization depuis notre UI Swagger.</p>
<p>Une barre apparait avec un bouton &quot;Authorize&quot; dans la documentation :</p>
<p><img src="https://user-images.githubusercontent.com/3168281/72219427-e5a08180-353d-11ea-99c8-228bf401dc98.png" alt="image" /></p>
<p>Lorsqu'on clique dessus, une popin apparait :</p>
<p><img src="https://user-images.githubusercontent.com/3168281/72219423-df120a00-353d-11ea-8f81-6405fdde5c80.png" alt="image" /></p>
<p>On reclique sur Authorize, un nouvel onglet s'ouvre sur Google, puis nous somme redirig√© sur la documentation.
L'OAuth s'est bien pass√©.</p>
<h2><a id="user-content-authentication" href="#authentication" name="authentication" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Authentication</h2>
<p>Nous sommes a pr√©sent bien connect√© via l'Oauth de google. Pour chaque appel que nous faisons a l'API, un header <code>Authorization: Bearer accessToken</code> est ajout√©.</p>
<p>Mais si nous appelons le endpoint <code>/api/whoami</code>, il retourne toujours <code>null</code>.
Voyons comment r√©cup√©rer notre utilsateur.</p>
<p>Tout d'abord, g√©n√©rons un GuardAuthenticator :</p>
<pre><code class="language-bash">php bin/console make:auth
</code></pre>
<p>Lorsque cette commande le demande, choisissez &quot;Empty Authenticator&quot;</p>
<p>Puis r√©cup√©rons league/oauth2-google</p>
<pre><code class="language-bash">composer require league/oauth2-google
</code></pre>
<p>Dans notre <code>services.yaml</code>, cr√©eons un service pour le google Provider</p>
<pre><code class="language-yaml">services:
    # ...
    League\OAuth2\Client\Provider\Google:
        class: League\OAuth2\Client\Provider\Google
        arguments:
            - {clientId: '%env(OAUTH_GOOGLE_ID)%', clientSecret: '%env(OAUTH_GOOGLE_SECRET)%'}
</code></pre>
<p>Et injectons ce service dans notre authenticator :</p>
<pre><code class="language-php">// src/Security/GoogleOauthAuthenticator.php
&lt;?php
declare(strict_types=1);

namespace App\Security;

use League\OAuth2\Client\Provider\Google;
use Doctrine\ORM\EntityManagerInterface;
//...
use Symfony\Component\Security\Guard\AbstractGuardAuthenticator;

final class GoogleOauthAuthenticator extends AbstractGuardAuthenticator
{
    /**
     * @var \League\OAuth2\Client\Provider\Google
     */
    private $client;
    /**
     * @var \Doctrine\ORM\EntityManagerInterface
     */
    private $entityManager;

    public function __construct(Google $client, EntityManagerInterface $entityManager)
    {
        $this-&gt;client = $client;
        $this-&gt;entityManager = $entityManager;
    }
</code></pre>
<p>Completons maintenant les diff√©rentes m√©thodes de notre <code>GoogleOauthAuthenticator</code>.</p>
<p>La m√©thode <code>support</code> permet de v√©rifier si les conditions sont bien remplies pour qu'on appelle la classe.
Dans notre cas, il s'agit de v√©rifier la pr√©sence du nouvel header <code>authorization</code>.</p>
<pre><code class="language-php">    public function supports(Request $request): bool
    {
        return $request-&gt;headers-&gt;has('authorization');
    }
</code></pre>
<p>La m√©thode <code>getCredentials</code>  permet d'extraire les cr√©dentials n√©cessaire pour la r√©cup√©ration de notre Utilisateur.</p>
<pre><code class="language-php">    public function getCredentials(Request $request)
    {
        $accessToken = explode(' ', $request-&gt;headers-&gt;get('authorization'))[1];

        return new \League\OAuth2\Client\Token\AccessToken(['access_token' =&gt; $accessToken]);
    }
</code></pre>
<blockquote>
<p>Ici, on explose le contenu du header, le token est la deuxi√®me partie.</p>
</blockquote>
<p>La m√©thode <code>getUser</code> doit retrouver l'utilisateur √† partir des cr√©dentials. C'est ici qu'on va utiliser notre nouveau service.</p>
<pre><code class="language-php">    public function getUser($credentials, UserProviderInterface $userProvider): ?UserInterface
    {
        /** @var \League\OAuth2\Client\Provider\GoogleUser $googleUser */
        $googleUser = $this-&gt;client-&gt;getResourceOwner($credentials);

        $email = $googleUser-&gt;getEmail();
		
        try {
            $user = $userProvider-&gt;loadUserByUsername($email);
        } catch (UsernameNotFoundException $exception) {
            $user = (new User())-&gt;setEmail($email);
            $this-&gt;entityManager-&gt;persist($user);
            $this-&gt;entityManager-&gt;flush();
        }

        return $user;
    }
</code></pre>
<p>Enfin, la m√©thode <code>checkCredential</code> doit toujours retourner <code>true</code>, et la methode <code>supportsRememberMe</code> retournera <code>false</code>.</p>
<pre><code class="language-php">    public function checkCredentials($credentials, UserInterface $user): bool
    {
        return true;
    }
    public function supportsRememberMe(): bool
    {
        return false;
    }
</code></pre>
<p>Et c'est tout. Les autres m√©thodes peuvent rester vide pour l'instant, il conviendra de le remplir correctement le temps venu.</p>
<p>Si dor√©navant, nous appelons l'endpoint <code>/api/whoami</code>, notre utilisateur va √™tre renvoy√©.</p>
<h2><a id="user-content-un-autre-oauth-provider--github" href="#un-autre-oauth-provider--github" name="un-autre-oauth-provider--github" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Un autre OAuth provider : Github</h2>
<p>La plupart du temps, nous proposons √† nos utilisateurs plusieurs moyen de se connecter. Voyons comment ajouter une deuxieme authentification avec Github OAuth.</p>
<p>Commen√ßons par <a href="https://developer.github.com/apps/building-oauth-apps/">cr√©er une application OAuth sur Github</a> et ajoutons nos nouveaux credentials dans le fichier <code>.env</code>.</p>
<pre><code class="language-ini">#.env
#...
OAUTH_GITHUB_ID=monid
OAUTH_GITHUB_SECRET=monsecret
</code></pre>
<p>Rempla√ßons temporairement la configuration d'API Platform pour utiliser Github en OAuth.</p>
<pre><code class="language-yaml">#config/packages/api_platform.yaml
api_platform:
    # ...
    oauth:
        enabled: true
        clientId: '%env(OAUTH_GITHUB_ID)%'
        clientSecret: '%env(OAUTH_GITHUB_ID)%'
        type: 'oauth2'
        # The oauth flow grant type.
        flow: 'authorizationCode'
        # The oauth authentication url.
        authorizationUrl: 'https://github.com/login/oauth/authorize'
        # The oauth token url.
        tokenUrl: 'https://github.com/login/oauth/access_token'
        # The oauth scopes.
        scopes:
            'user:email': 'Allow to retrieve user email'
</code></pre>
<p>Si nous r√©essayons le flow OAuth depuis Swagger UI, une erreur survient :</p>
<blockquote>
<p><strong>Auth Error</strong> TypeError: Failed to fetch</p>
</blockquote>
<p>En inspectant les requ√™tes depuis l'inspecteur web, on se rend compte que l'url pour r√©cup√©rer l'accessToken ne prend pas en charge les CORS.</p>
<p>Nous devons donc cr√©er un controlleur qui s'occupera de r√©cup√©rer notre AccessToken.</p>
<pre><code class="language-bash">php bin/console make:controller GithubTokenController --no-template
</code></pre>
<p>Et nous allons utiliser le paquet <code>league/oauth2-github</code> qui fera l'appel pour nous :</p>
<pre><code class="language-bash">composer require league/oauth2-github
</code></pre>
<p>De la m√™me mani√®re que pour Google, ajoutons ce provider en tant que service :</p>
<pre><code class="language-yaml">#config/services.yaml

services:
    # ...
    League\OAuth2\Client\Provider\Github:
        class: League\OAuth2\Client\Provider\Github
        arguments:
            - {clientId: '%env(OAUTH_GITHUB_ID)%', clientSecret: '%env(OAUTH_GITHUB_SECRET)%'}

</code></pre>
<p>Injectons ce service dans notre controller et renvoyons l'accessToken :</p>
<pre><code class="language-php">// src/Controller/GithubTokenController.php
&lt;?php
declare(strict_types=1);

namespace App\Controller;

use League\OAuth2\Client\Provider\Github;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Routing\Annotation\Route;

final class GithubTokenController
{
    /**
     * @Route(&quot;/github/token&quot;, name=&quot;github_token&quot;)
     */
    public function index(Request $request, Github $client): JsonResponse
    {
        return new JsonResponse(
            $client-&gt;getAccessToken('authorization_code', [
                'code' =&gt; $request-&gt;request-&gt;get('code'),
            ])
        );
    }
}
</code></pre>
<p>Et on change la valeur de tokenUrl dans la config d'API Platform par notre nouvelle route :</p>
<pre><code class="language-yaml">#config/packages/api_platform.yaml
api_platform:
    # ...
    oauth: 
        # ...
        tokenUrl: '/github/token'
</code></pre>
<p>Si nous r√©essayons le flow d'authorization sur Swagger UI, tout devrait bien passer maintenant.</p>
<p>Pour g√©rer l'authentification, nous allons devoir, comme auparavant pour Google, cr√©er un GuardAuthenticator.</p>
<pre><code class="language-bash">php bin/console make:auth
</code></pre>
<blockquote>
<p>A la cr√©ation, un avertissement vous pr√©viendra du comportement lorsque nous avons plusieurs Authenticators et vous demandera de choisir l'entry_point par d√©faut. Choisissez celui nouvellement cr√©√©.</p>
<p>Plus d'info sur <a href="https://symfony.com/doc/current/security/multiple_guard_authenticators.html">la documentation</a>.</p>
</blockquote>
<p>Le principe est le m√™me que pour celui de Google, il faudra juste injecter le GithubProvider √† la place.</p>
<p>Si on essaye d'appeler l'endpoint <code>/api/whoami</code>, nous obtenons ... une erreur.</p>
<pre><code class="language-json">{
	&quot;type&quot;: &quot;https:\/\/tools.ietf.org\/html\/rfc2616#section-10&quot;,
	&quot;title&quot;: &quot;An error occurred&quot;,
	&quot;detail&quot;: &quot;invalid_request&quot;
}
</code></pre>
<p>En utilisant le profiler, on peut voir que l'authentification s'est bien pass√©, nous avons un utilisateur logg√©, mais on passe ensuite dans le GoogleOAuthAuthenticator, qui essaye de r√©cup√©rer les information avec un accessToken qui vient de Github, et on a donc une exception.</p>
<p>Pour palier √† √ßa, nous pouvons faire un try/catch dans les GuardAuthenticators au moment de r√©cuperer les utilisateurs, et retourner <code>null</code> si l'appel l√®ve une erreur.</p>
<pre><code class="language-php">// src/Security/GoogleOAuthAuthenticator.php
// ...
    public function getUser($credentials, UserProviderInterface $userProvider): ?UserInterface
    {
        try {
            /** @var \League\OAuth2\Client\Provider\GoogleUser $googleUser */
            $googleUser = $this-&gt;client-&gt;getResourceOwner($credentials);
        } catch (\Throwable $throwable) {
            return null;
        }

        //...
        return $user;
    }
</code></pre>
<p>Mais nous pouvons aussi regrouper les deux Guard en un seul.
Pour cela, dans le <code>services.yaml</code>, ajoutons un tag sur nos OAuth providers :</p>
<pre><code class="language-yaml">#config/services.yaml
services:
    # ...
    League\OAuth2\Client\Provider\Google:
        class: League\OAuth2\Client\Provider\Google
        arguments:
            - {clientId: '%env(OAUTH_GOOGLE_ID)%', clientSecret: '%env(OAUTH_GOOGLE_SECRET)%'}
        tags:
            - {name: 'oauth_provider'}

    League\OAuth2\Client\Provider\Github:
        class: League\OAuth2\Client\Provider\Github
        arguments:
            - {clientId: '%env(OAUTH_GITHUB_ID)%', clientSecret: '%env(OAUTH_GITHUB_SECRET)%'}
        tags:
            - {name: 'oauth_provider'}

</code></pre>
<p>Retirons les guard actuels dans notre security.yaml</p>
<pre><code class="language-diff">#config/packages/security.yaml
security:
    # ...
    firewalls:
        #...
        main:
            anonymous: lazy
-            guard:
-                authenticators:
-                    - App\Security\GithubOAuthAuthenticator
-                    - App\Security\GoogleOauthAuthenticator
-                entry_point: App\Security\GithubOAuthAuthenticator

</code></pre>
<p>Et cr√©ons un nouveau Guard : ChainOAuthAuthenticator.</p>
<pre><code class="language-php">// src/Security/ChainOAuthAuthenticator
&lt;?php
declare(strict_types=1);

namespace App\Security;

use App\Entity\User;
use Doctrine\ORM\EntityManagerInterface;
use League\OAuth2\Client\Token\AccessToken;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Guard\AbstractGuardAuthenticator;

final class ChainOAuthAuthenticator extends AbstractGuardAuthenticator
{
    /**
     * @var iterable&lt;\League\OAuth2\Client\Provider\AbstractProvider&gt;
     */
    private $oauthProviders;
    /**
     * @var \Doctrine\ORM\EntityManagerInterface
     */
    private $entityManager;

    public function __construct(iterable $oauthProviders, EntityManagerInterface $entityManager)
    {
        $this-&gt;oauthProviders = $oauthProviders;
        $this-&gt;entityManager = $entityManager;
    }

    public function supports(Request $request): bool
    {
        return $request-&gt;headers-&gt;has('authorization');
    }

    public function getCredentials(Request $request): AccessToken
    {
        $accessToken = explode(' ',$request-&gt;headers-&gt;get('authorization'))[1];

        return new AccessToken(['access_token' =&gt; $accessToken]);
    }

    public function getUser($credentials, UserProviderInterface $userProvider): ?UserInterface
    {
        $oauthUser = null;
        /** @var \League\OAuth2\Client\Provider\AbstractProvider $oauthProvider */
        foreach ($this-&gt;oauthProviders as $oauthProvider) {
            try {
                $oauthUser = $oauthProvider-&gt;getResourceOwner($credentials);
                break;
            } catch (\Throwable $throwable) {
                // This provider doesn't support current accessToken
            }
        }

        if (null === $oauthUser) {
            // No OAuth user found
            return null;
        }

        $email = $oauthUser-&gt;getEmail();

        try {
            $user = $userProvider-&gt;loadUserByUsername($email);
        } catch (UsernameNotFoundException $exception) {
            $user = (new User())-&gt;setEmail($email);
            $this-&gt;entityManager-&gt;persist($user);
            $this-&gt;entityManager-&gt;flush();
            $this-&gt;entityManager-&gt;refresh($user);
        }

        return $user;
    }

    public function checkCredentials($credentials, UserInterface $user): bool
    {
        return true;
    }

    public function onAuthenticationFailure(Request $request, AuthenticationException $exception)
    {
        $message = strtr($exception-&gt;getMessageKey(), $exception-&gt;getMessageData());

        return new JsonResponse($message, JsonResponse::HTTP_FORBIDDEN);
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token, $providerKey)
    {
        // No need to redirect, as it's a stateless call.
        // Let the request continue to be handled by the controller
        return null;
    }

    public function start(Request $request, AuthenticationException $authException = null)
    {
        $message = 'Auth header required';
        if (null !== $authException) {
            $message = strtr($authException-&gt;getMessageKey(), $authException-&gt;getMessageData());
        }

        return new JsonResponse($message, JsonResponse::HTTP_UNAUTHORIZED);
    }

    public function supportsRememberMe(): bool
    {
        return false;
    }
}
</code></pre>
<p>Puis modifions le <code>services.yaml</code> pour injecter automatiquement nos providers tagg√©s.</p>
<pre><code class="language-yaml">#config/services.yaml

services:
    _defaults:
        autowire: true
        autoconfigure: true
        bind:
            iterable $oauthProviders: !tagged_iterator oauth_provider
    # ...
</code></pre>
<p>Notre ChainOAuthAuthenticator s'occupera donc maintenant de tester notre AccessToken avec les diff√©rents OAuthProviders.</p>
<h2><a id="user-content-plusieurs-oauth-login-sur-swagger-ui" href="#plusieurs-oauth-login-sur-swagger-ui" name="plusieurs-oauth-login-sur-swagger-ui" class="heading-permalink" aria-hidden="true" title="Permalink">¬∂</a>Plusieurs OAuth Login sur Swagger UI</h2>
<p>Comme vu pr√©cedemment, API Platform ne propose pas (<em>encore</em>) la possibilit√© de rajouter plusieurs OAuth dans sa configuration.</p>
<p>Swagger UI dans sa v2 le supporte, tout comme la v3. Cependant, dans la v2, les champs client_id et client_secret ne s'affichent pas, et nous devons pouvoir les diff√©renciers.</p>
<p>De m√™me, Swagger UI propose une fonction pour initialiser ces champs, mais est limit√© √† un seul OAuth login. Donc si nous en affichons plusieurs, ils utiliseront tous les m√™mes valeurs.</p>
<p>Pour afficher nos OAuth login sur le Swagger UI d'API Platform, nous allons donc &quot;d√©sactiver&quot; le support OAuth d'API Platform, et au passage activer la v3 :</p>
<pre><code class="language-yaml"># config/packages/api_platform.yaml
api_platform:
    # ...
    swagger:
        versions: [3]
    oauth:
        enabled: false
</code></pre>
<p>D√©finissons nos flows OAuth dans nos parametres</p>
<pre><code class="language-yaml">#config/services.yaml
parameters:
    oauths:
        github:
            type: oauth2
            description: OAuth authorization code Grant
            flows:
                authorizationCode:
                    tokenUrl: '/github/token'
                    authorizationUrl: 'https://github.com/login/oauth/authorize'
                    scopes:
                        'user:email': 'Allow to retrieve user email'
        google:
            type: oauth2
            description: OAuth authorization code Grant
            flows:
                authorizationCode:
                    tokenUrl: 'https://www.googleapis.com/oauth2/v4/token'
                    authorizationUrl: 'https://accounts.google.com/o/oauth2/v2/auth'
                    scopes:
                        'email': 'Allow to retrieve user email'
services:
    # ...
</code></pre>
<p>Et cr√©eons un <a href="https://api-platform.com/docs/core/swagger/#overriding-the-openapi-specification">SwaggerDecorator</a>, auquel on passe notre d√©finition de flows OAuth</p>
<pre><code class="language-yaml"># config/services.yaml
#...
services:
    # ...
    App\Swagger\OAuthSwaggerDecorator:
        decorates: 'api_platform.swagger.normalizer.api_gateway'
        arguments: [ '@App\Swagger\OAuthSwaggerDecorator.inner', '%oauths%' ]
        autoconfigure: false
</code></pre>
<pre><code class="language-php">// src/Swagger/OAuthSwaggerDecorator.php
&lt;?php
declare(strict_types=1);

namespace App\Swagger;

use Symfony\Component\Serializer\Normalizer\NormalizerInterface;

final class OAuthSwaggerDecorator implements NormalizerInterface
{
    private $decorated;
    /**
     * @var array
     */
    private $oauths;

    public function __construct(NormalizerInterface $decorated, array $oauths)
    {
        $this-&gt;decorated = $decorated;
        $this-&gt;oauths = $oauths;
    }

    public function normalize($object, string $format = null, array $context = [])
    {
        // Retrieve swagger docs
        $docs = $this-&gt;decorated-&gt;normalize($object, $format, $context);

        // Add our flows in securitySchemes
        $docs['components']['securitySchemes'] = $this-&gt;oauths;
        $docs['security'] = [array_map(static function($value): array {
            return [];
        }, $this-&gt;oauths)];
        
        return $docs;
    }

    public function supportsNormalization($data, string $format = null)
    {
        return $this-&gt;decorated-&gt;supportsNormalization($data, $format);
    }
}
</code></pre>
<p>Swagger UI affiche maintenant les deux mode de connection OAuth dans sa popin.</p>
<p>Malheureusement, les champs clientId et clientSecret sont vide. Pour pouvoir appeler nos service, on devra les renseigner.</p>
<p>Comme dis pr√©cedemment, Swagger UI ne supporte pas de pouvoir renseigner ces champs lorsqu'on a plusieurs authentifications. √áa arrivera peut-√™tre un jour, suivez cette <a href="https://github.com/swagger-api/swagger-ui/issues/4690">issue</a>.</p>
<p>En attendant, nous allons tweaker l'interface pour remplir ces champs pour nous.</p>
<p>Pour cela, il va nous falloir faire un override du template SwaggerUi, injecter dedans nos information de client, et enfin ajouter des boutons pour changer √† la vol√©e.</p>
<p>Pour l'override du template, cr√©er un fichier <code>templates/bundle/ApiPlatformBundle/SwaggerUi/index.html.twig</code> :</p>
<pre><code class="language-twig">{% extends '@!ApiPlatform/SwaggerUi/index.html.twig' %}
{% block javascript %}
    {{ parent() }}
    &lt;script &gt;
        var oauths = {{ oauth_providers()|raw }};
    &lt;/script&gt;
    &lt;script src=&quot;{{ asset('swagger-oauth.js') }}&quot;&gt;&lt;/script&gt;
{% endblock %}
</code></pre>
<p>La fonction <code>oauth_providers</code> nous permet de rajouter la configuration de nos providers OAuth.
Ajoutons cette fonction :</p>
<pre><code class="language-bash">php bin/console make:twig-extension OAuthExtension
</code></pre>
<pre><code class="language-php">// src/Twig/OAuthExtension
&lt;?php
declare(strict_types=1);

namespace App\Twig;

use Twig\Extension\AbstractExtension;
use Twig\TwigFilter;
use Twig\TwigFunction;

final class OAuthExtension extends AbstractExtension
{
    /**
     * @var iterable&lt;\League\OAuth2\Client\Provider\AbstractProvider&gt;
     */
    private $oauthProviders;

    public function __construct(iterable $oauthProviders)
    {
        $this-&gt;oauthProviders = $oauthProviders;
    }

    public function getFunctions(): array
    {
        return [
            new TwigFunction('oauth_providers', [$this, 'oauthProviders']),
        ];
    }

    public function oauthProviders(): string
    {
        $data = [];
        /** @var \League\OAuth2\Client\Provider\AbstractProvider $provider */
        foreach ($this-&gt;oauthProviders as $provider)
        {
            $reflectionClass = new \ReflectionClass($provider);
            
            $clientIdProperty = $reflectionClass-&gt;getProperty('clientId');
            $clientIdProperty-&gt;setAccessible(true);

            $clientSecretProperty = $reflectionClass-&gt;getProperty('clientSecret');
            $clientSecretProperty-&gt;setAccessible(true);

            $clientId = $clientIdProperty-&gt;getValue($provider);
            $clientSecret = $clientSecretProperty-&gt;getValue($provider);

            $data[] = [
                'name' =&gt; strtolower($reflectionClass-&gt;getShortName()),
                'client_id' =&gt; $clientId,
                'client_secret' =&gt; $clientSecret
            ];
        }

        return json_encode($data);
    }
}
</code></pre>
<p>Ici, on r√©utilise l'injection des providers tagg√© <code>oauth_provider</code>, afin de faire √©voluer directement le rendu quand on ajoutera de nouveaux provider.</p>
<p>Maintenant, rajoutons le javascript qui va cr√©er les boutons et appeler la fonction initOauth de swagger :</p>
<pre><code class="language-js">// public/swagger-oauth.js
'use strict';

window.addEventListener('load', function() {
    // Same in init-swagger-ui provided by API Platform
    const data = JSON.parse(document.getElementById('swagger-data').innerText);
    const ui = SwaggerUIBundle({
        spec: data.spec,
        dom_id: '#swagger-ui',
        validatorUrl: null,
        oauth2RedirectUrl: data.oauth.redirectUrl,
        presets: [
            SwaggerUIBundle.presets.apis,
            SwaggerUIStandalonePreset,
        ],
        plugins: [
            SwaggerUIBundle.plugins.DownloadUrl,
        ],
        layout: 'StandaloneLayout',
    });

    const authWrapper = document.getElementsByClassName('auth-wrapper')[0];

    // Create an info about current credentials
    const info = document.createElement(&quot;p&quot;);
    let oauthTxt = &quot;Current OAuth Credentials : &quot;;
    info.innerText = oauthTxt + &quot;None&quot;;

    authWrapper.parentNode.insertBefore(info, authWrapper);

    oauths.forEach(function (elem) {
        const btn = document.createElement(&quot;button&quot;);
        btn.classList = 'btn';
        btn.innerText = 'OAuth ' + elem.name;
        btn.onclick = function() {
            ui.initOAuth({
                clientId: elem.client_id,
                clientSecret: elem.client_secret
            });
            info.innerText = oauthTxt + elem.name;
        };
        // Add btn near to authorize button
        authWrapper.appendChild(btn);
    });
});

</code></pre>
<p>Voici le rendu :</p>
<p><img src="https://user-images.githubusercontent.com/3168281/72219384-7fb3fa00-353d-11ea-8953-a1ad803f9b68.png" alt="image" /></p>
<p>Au clic sur le bouton OAuth google, les credentials de Google seront pr√©remplis dans la popin.</p>

            </div>
                        <div class="mt-6 mb-0 text-right">
                <a href="#" data-controller="share" class="share hidden mr-2 px-4 py-2 bg-gray-100 text-blue-500 border border-blue-500 hover:bg-blue-500 hover:text-white" data-title="üá´üá∑ API Platform, Oauth, &amp; Swagger UI">
                    <i class="fas fa-share-alt"></i>
                    Share
                </a>
                <a href="https://gist.github.com/9f453bdb14c5565baa7a20f35e23f2bc"
                   target="_blank" rel="nofollow,noopener"
                   class="px-4 py-2 bg-gray-100 text-blue-500 border border-blue-500 hover:bg-blue-500 hover:text-white">
                    <i class="fa fa-external-link-alt"></i>
                    React on gist.github.com
                </a>
            </div>
        </div>
        <div class="my-6">
    <a href="/" class="px-4 py-2 bg-gray-100 text-blue-500 border border-blue-500 hover:bg-blue-500 hover:text-white">
        <i class="fas fa-arrow-circle-left"></i>
        Back to home
    </a>
</div>

    </div>
        </main>
        <footer class="m-auto border-t border-gray-400 py-4 w-full max-w-5xl px-2 md:px-12 md:text-sm text-gray-600">
            <div class="sm:flex justify-between text-center">
                <div class="sm:w-1/2 sm:text-left">
                    ¬© <a href="https://jib√©barth.fr">Jib√© Barth</a>
                </div>
                <div class="w-full sm:text-center">
                    Last generation: Jun 24, 2021, 12:19:30 PM
                </div>
                <div class="sm:w-1/2 sm:text-right">
                        <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-github text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-twitter text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://linkedin.com/in/jib√©-b-772884a3"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-linkedin text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-symfony text-gray-600 hover:text-black"></i>
    </a>

                </div>
            </div>
        </footer>
    </body>
</html>
