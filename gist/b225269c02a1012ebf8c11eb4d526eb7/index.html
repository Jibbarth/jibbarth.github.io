<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
                    <title> âš¡Recreate Github CLI OAuth feature in a Symfony command âš¡ // JibÃ© Barth</title>
                        <meta name="author" content="JibÃ© Barth">
            <meta name="description" content="
Github recently released a CLI tool to manage issues and PR directly from your terminal.
As I work on some open source projects, I downloaded it to give a try.
And...
">
            <meta name="image" content="https://images.unsplash.com/photo-1528372444006-1bfc81acab02?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=300&amp;ixid=eyJhcHBfaWQiOjF9&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600">
                        <meta itemprop="name" content=" âš¡Recreate Github CLI OAuth feature in a Symfony command âš¡ // JibÃ© Barth">
            <meta itemprop="description" content="
Github recently released a CLI tool to manage issues and PR directly from your terminal.
As I work on some open source projects, I downloaded it to give a try.
And...
">
            <meta itemprop="image" content="https://images.unsplash.com/photo-1528372444006-1bfc81acab02?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=300&amp;ixid=eyJhcHBfaWQiOjF9&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600">
                        <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="@Jibbarth">
            <meta name="twitter:creator" content="@Jibbarth">
            <meta name="twitter:image" content="https://images.unsplash.com/photo-1528372444006-1bfc81acab02?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=300&amp;ixid=eyJhcHBfaWQiOjF9&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600">
                        <meta name="og:title" content=" âš¡Recreate Github CLI OAuth feature in a Symfony command âš¡ // JibÃ© Barth">
            <meta name="og:description" content="
Github recently released a CLI tool to manage issues and PR directly from your terminal.
As I work on some open source projects, I downloaded it to give a try.
And...
">
            <meta name="og:image" content="https://images.unsplash.com/photo-1528372444006-1bfc81acab02?crop=entropy&amp;cs=tinysrgb&amp;fit=crop&amp;fm=jpg&amp;h=300&amp;ixid=eyJhcHBfaWQiOjF9&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600">
            <meta name="og:url" content="https://xn--jibbarth-d1a.fr">
            <meta name="og:site_name" content="JibÃ© Barth">
            <meta name="og:type" content="article">
            <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Rss feed for https://jibÃ©barth.fr">
                                <link rel="stylesheet" href="/dist/tailwind.css">
            <link rel="stylesheet" href="/dist/1.css"><link rel="stylesheet" href="/dist/app.css">
        
    <link rel="stylesheet" href="/dist/0.css"><link rel="stylesheet" href="/dist/gist.css">
    </head>
    <body class="flex flex-col min-h-screen bg-gray-300 font-sans">
        <header>
                        <div class="bg-gray-100 mb-6 pb-6 w-full h-auto flex flex-col items-center shadow-sm">
                <div class="h-64 xl:h-full w-full">
                        <img class="h-full w-full object-cover" src="data:image/png;base64, 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">
                </div>
                <div class="-ml-56 sm:w-64">
                    <div class="shadow h-32 w-32 -my-16 border-white rounded-full overflow-hidden border-4">
                        <a href="/">
                            <img class="object-cover w-full h-full" src="https://gravatar.com/avatar/f7a23636c530faa0ceca6199226902e7?s=200">
                        </a>
                    </div>
                </div>
                <div class="mt-16 sm:mt-4">
                    <h1 class="text-3xl text-center font-bold">
                        JibÃ© Barth
                    </h1>
                    <p class="text-sm text-gray-600 text-center">
                        ðŸ‡«ðŸ‡· Web developer
                        <div class="text-center">
                            <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-github text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-twitter text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://linkedin.com/in/jibÃ©-b-772884a3"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-linkedin text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-symfony text-gray-600 hover:text-black"></i>
    </a>

                        </div>
                    </p>
                </div>
                <div class="mt-4 pt-3 flex flex-wrap mx-6 border-t justify-center">
                        <div class="text-center mt-1">
        <h2 class="block text-gray-800 text-2xl font-semibold"> âš¡Recreate Github CLI OAuth feature in a Symfony command âš¡</h2>
        <p class="inline-block text-gray-600 text-sm font-base">Published Feb 16, 2020</p>
    </div>
                </div>
            </div>
                    </header>
        <main class="flex-grow">
                <div class="flex flex-col items-center">
        <div class="bg-gray-100 p-6 w-full max-w-4xl">
            <div class="markdown">
                <h1><a id="user-content-recreate-github-cli-oauth-feature-in-a-symfony-command-" href="#recreate-github-cli-oauth-feature-in-a-symfony-command-" name="recreate-github-cli-oauth-feature-in-a-symfony-command-" class="heading-permalink" aria-hidden="true" title="Permalink"><svg class="heading-permalink-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>âš¡Recreate Github CLI OAuth feature in a Symfony command âš¡</h1>
<p>Github recently released a <a href="https://cli.github.com/">CLI tool</a> to manage issues and PR directly from your terminal.
As I work on some open source projects, I downloaded it to give a try.</p>
<p>And at first launch, the CLI ask to connect by using OAuth. It propose to press &quot;Enter&quot; to open github.com in my browser, and catch correctly the access_token.</p>
<p>That .. blown my mind ðŸ¤¯ I didn't expect we can connect through terminal like this.
So, as it's open source, I dived into the <a href="https://github.com/cli/cli">code source</a>.</p>
<p>There is two main feature to handle authorization like this.
First, you have to launch your browser to a specified url. Then, you have to handle response on redirected uri.</p>
<p>Let's see how to reproduce this into a Symfony Application.</p>
<h2><a id="user-content-initialization" href="#initialization" name="initialization" class="heading-permalink" aria-hidden="true" title="Permalink"><svg class="heading-permalink-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initialization</h2>
<p>Create a symfony project from skeleton, and create a command into it.</p>
<pre><code class="language-bash">composer create-project symfony/skeleton cli-oauth
cd cli-oauth
composer req maker
php bin/console make:command app:oauth-login
</code></pre>
<p>Clean a little the command, to get ready to work :</p>
<pre><code class="language-php">// src/Command/OAuthLoginCommand.php
&lt;?php

declare(strict_types=1);

namespace App\Command;

use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\Style\SymfonyStyle;

final class OauthLoginDemoCommand extends Command
{
    protected static $defaultName = 'app:oauth-login-demo';

    protected function configure()
    {
        $this
            -&gt;setDescription('Login via OAuth')
        ;
    }

    protected function execute(InputInterface $input, OutputInterface $output): int
    {
        $io = new SymfonyStyle($input, $output);
        $io-&gt;note('Authentication Required');
       
        // TODO

        $io-&gt;success('You are successfully connected.');

        return 0;
    }
}
</code></pre>
<h2><a id="user-content-open-browser" href="#open-browser" name="open-browser" class="heading-permalink" aria-hidden="true" title="Permalink"><svg class="heading-permalink-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Open browser</h2>
<p>To open browser from Terminal, we could launch it via a Process.</p>
<pre><code class="language-bash">composer require symfony/process
</code></pre>
<p>Then, if I use Google Chrome, I can launch it like this:</p>
<pre><code class="language-php">use Symfony\Component\Process\Process;
$process = new Process(['google-chrome', 'http://github.com']);
$process-&gt;run();
</code></pre>
<p>It's works, but not anyone use Google Chrome. We have to use default browser for user.
To do this, we have to check if a <code>BROWSER</code> is in environnement variables, or fallback into default system mechanism.</p>
<p>Let's create a Browser class:</p>
<pre><code class="language-php">//src/Browser.php
&lt;?php

declare(strict_types=1);

namespace App;

use Symfony\Component\Process\Process;

final class Browser
{
    public function open(string $url): void
    {
        // Validate URL
        if (false === filter_var($url, FILTER_VALIDATE_URL)) {
            throw new \InvalidArgumentException(sprintf('&quot;%s&quot; is not a valid URL', $url));
        }
        
        $process = $this-&gt;getCommand($url);
        $process-&gt;run();
    }
    
    private function getCommand(string $url): Process
    {
        $browser = getenv('BROWSER');
        if ($browser) {
            return new Process([$browser, $url]);
        }
        return $this-&gt;systemFallBack($url);
    }
    
    private function systemFallBack($url): Process
    {
        switch (PHP_OS_FAMILY) {
            case 'Darwin':
                return new Process(['open', $url]);
            case 'Windows':
                return new Process(['cmd', '/c', 'start', $url]);
            default:
                return new Process(['xdg-open', $url]);
        }
    }
}
</code></pre>
<p>And call it from our command :</p>
<pre><code class="language-php">//src/Command/OAuthLogin.php
// ...
    protected function execute(InputInterface $input, OutputInterface $output): int
    {
        // ...
        $io-&gt;note('Authentication Required');
        $io-&gt;ask('Press enter to open github.com in your browser...');
        (new Browser())-&gt;open('http://github.com')
        // TODO
        // ...
</code></pre>
<p>The first feature is implemented. Let's see how we can retrieve access_token !</p>
<h2><a id="user-content-create-a-local-webserver-on-demand" href="#create-a-local-webserver-on-demand" name="create-a-local-webserver-on-demand" class="heading-permalink" aria-hidden="true" title="Permalink"><svg class="heading-permalink-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a local WebServer on demand</h2>
<p>As we can see when using [Github CLI], the OAuth flow redirect to <code>http://localhost:custom_port</code></p>
<p>So we need to create a WebServer on localhost, to be able to catch code.</p>
<p>To do this, we'll use <code>reactphp</code>:</p>
<pre><code class="language-bash">composer require react/http
</code></pre>
<p>And let's create a basic WebServer class:</p>
<pre><code class="language-php">//src/OAuth/WebServer.php
&lt;?php

declare(strict_types=1);

namespace App\OAuth;

use Psr\Http\Message\ServerRequestInterface;
use React\EventLoop\Factory;
use React\Http\Response;
use React\Http\Server as HttpServer;
use React\Socket\Server as SocketServer;

final class WebServer
{
    public function launch(): void
    {
        $loop = Factory::create();
        $socket = new SocketServer('127.0.0.1:8000', $loop);
        $http = new HttpServer(
            static function(ServerRequestInterface $request) {
                // TODO handle $request
                return new Response(200, ['content-type' =&gt; 'text/plain'], 'Hello World');
            }
        );
        $http-&gt;listen($socket);
        $loop-&gt;run();
    }
}
</code></pre>
<p>Use it together with our new Browser class in the command:</p>
<pre><code class="language-php">// src/Command/OAuthLoginCommand.php
// ...
    protected function execute(InputInterface $input, OutputInterface $output): int
    {
        // ...
        $io-&gt;note('Authentication Required');
        $io-&gt;ask('Press enter to open github.com in your browser...');
        $browser = new Browser();
        $server = new Webserver();
        $browser-&gt;open('http://localhost:8000');
        $server-&gt;launch();
</code></pre>
<p>By launching command, a new tab should open in the browser, and display &quot;Hello World&quot;.</p>
<p>Congrats, you can now implement your OAuth logic !</p>
<h2><a id="user-content-handle-oauth-logic-with-github" href="#handle-oauth-logic-with-github" name="handle-oauth-logic-with-github" class="heading-permalink" aria-hidden="true" title="Permalink"><svg class="heading-permalink-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handle OAuth logic with Github</h2>
<p>Let's begin by <a href="https://developer.github.com/apps/building-oauth-apps">create a new OAuth app on github</a>. In app settings, set <code>http://localhost/</code> for <strong>Authorization callback URL</strong>.</p>
<p>Add credentials into the <code>.env</code> file</p>
<pre><code class="language-ini">#.env
#...
OAUTH_GITHUB_ID=githubappid
OAUTH_GITHUB_SECRET=githubappsecret
</code></pre>
<p>Then, require <code>league/oauth2-client</code> and <code>league/oauth2-github</code> :</p>
<pre><code class="language-bash">composer require league/oauth2-client league/oauth2-github
</code></pre>
<p>And create a service to configure the Github provider:</p>
<pre><code class="language-yaml"># config/services.yaml

services:
    #...
    League\OAuth2\Client\Provider\Github:
        class: League\OAuth2\Client\Provider\Github
        arguments:
            - {clientId: '%env(OAUTH_GITHUB_ID)%', clientSecret: '%env(OAUTH_GITHUB_SECRET)%'}
</code></pre>
<p>When github will redirect you on your custom WebServer, we need to intercept request to retrieve information. We could do this by add a callable in function <code>launch</code>:</p>
<pre><code class="language-php">// src/OAuth/WebServer.php
// ...

    public function launch(callable $callback): void
    {
        // ...
        $http = new HttpServer(
            static function(ServerRequestInterface $request) use ($callback) {
                $callback($request);
                // stop loop after return response
                $loop-&gt;futureTick(fn() =&gt; $loop-&gt;stop());
                
                return new Response(200, ['content-type' =&gt; 'text/plain'], 'You can now close this tab.');
            }
        );
        // ...
    }
</code></pre>
<p>Back to our OAuthLoginCommand, inject the Github Provider, create a callback, and pass the good url to the browser:</p>
<pre><code class="language-php">// src/Command/OAuthLoginCommand.php
// ...
use League\OAuth2\Client\Provider\Github;
// ...
    private Github $github;
	private string $accessToken;    

    public function __construct(Github $github)
    {
        $this-&gt;github = $github;
    }
    // ...
    protected function execute(InputInterface $input, OutputInterface $output): int
    {
        // ...
        $io-&gt;note('Authentication Required');
        $io-&gt;ask('Press enter to open github.com in your browser...');
        // github authorization url
            $githubUrl = $this-&gt;github-&gt;getAuthorizationUrl(['redirect_uri' =&gt; 'http://localhost:8000']);
            $callback = function (ServerRequestInterface $request) {
            $code = $request-&gt;getQueryParams()['code'];
            $accessToken = $this-&gt;github-&gt;getAccessToken('authorization_code', [
                'code' =&gt; $code
            ]);
            $this-&gt;accessToken = $accessToken-&gt;getToken();
        };
        
        (new Browser())-&gt;open($githubUrl);
        (new WebServer())-&gt;launch($callback);

        if (null === $this-&gt;accessToken) {
            throw new \LogicException('Unable to fetch accessToken');
        }
        
        // Now you should have the accessToken. 
        // Retrieve resourceOwner and display it
        $token = new AccessToken(['access_token' =&gt; $this-&gt;accessToken]);
        $user = $this-&gt;github-&gt;getResourceOwner($token);
		
        $io-&gt;success('You are successfully connected. Welcome ' . $user-&gt;getNickName());
    }

</code></pre>
<p>You should now have a functionnal flow:</p>
<p><img src="https://user-images.githubusercontent.com/3168281/74605115-bb059380-50bc-11ea-84ae-50c9e1d372b0.gif" alt="cli-oauth" /></p>
<h2><a id="user-content-going-further" href="#going-further" name="going-further" class="heading-permalink" aria-hidden="true" title="Permalink"><svg class="heading-permalink-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Going further</h2>
<p>I'll stop here for explanation.
But, you can go further. You can find below my source code, a way to manage multiple oauth-providers, and to use a Symfony Controller Route for a better rendering on redirect.</p>
<p>Note also that there is not storing for accessToken, maybe we should store it somewhere and reuse it instead of reopen browser each time we launch command.</p>
<p>Thanks for reading ðŸ¤—</p>

            </div>
                            <div class="pt-6 pb-3 border-t ">
                                            <script src="https://gist.github.com/Jibbarth/b225269c02a1012ebf8c11eb4d526eb7.js?file=OAuthProviderCollection.php"></script>
                                    </div>
                            <div class="pt-6 pb-3 border-t ">
                                            <script src="https://gist.github.com/Jibbarth/b225269c02a1012ebf8c11eb4d526eb7.js?file=OauthLoginCommand.php"></script>
                                    </div>
                            <div class="pt-6 pb-3 border-t ">
                                            <script src="https://gist.github.com/Jibbarth/b225269c02a1012ebf8c11eb4d526eb7.js?file=WebServer.php"></script>
                                    </div>
                            <div class="pt-6 pb-3 border-t ">
                                            <script src="https://gist.github.com/Jibbarth/b225269c02a1012ebf8c11eb4d526eb7.js?file=services.yaml"></script>
                                    </div>
                        <div class="mt-6 mb-0 text-right">
                <a href="#" class="share hidden mr-2 px-4 py-2 bg-gray-100 text-blue-500 border border-blue-500 hover:bg-blue-500 hover:text-white" data-title=" âš¡Recreate Github CLI OAuth feature in a Symfony command âš¡">
                    <i class="fas fa-share-alt"></i>
                    Share
                </a>
                <a href="https://gist.github.com/b225269c02a1012ebf8c11eb4d526eb7"
                   target="_blank" rel="nofollow,noopener"
                   class="px-4 py-2 bg-gray-100 text-blue-500 border border-blue-500 hover:bg-blue-500 hover:text-white">
                    <i class="fa fa-external-link-alt"></i>
                    React on gist.github.com
                </a>
            </div>
        </div>
        <div class="my-6">
    <a href="/" class="px-4 py-2 bg-gray-100 text-blue-500 border border-blue-500 hover:bg-blue-500 hover:text-white">
        <i class="fas fa-arrow-circle-left"></i>
        Back to home
    </a>
</div>

    </div>
        </main>
        <footer class="m-auto border-t border-gray-400 py-4 w-full max-w-5xl px-2 md:px-12 md:text-sm text-gray-600">
            <div class="sm:flex justify-between text-center">
                <div class="sm:w-1/2 sm:text-left">
                    Â© <a href="https://jibÃ©barth.fr">JibÃ© Barth</a>
                </div>
                <div class="w-full sm:text-center">
                    Last generation: Jul 15, 2020, 12:19:59 AM
                </div>
                <div class="sm:w-1/2 sm:text-right">
                        <a
        href="https://github.com/Jibbarth"
        title="Github"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-github text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://twitter.com/jibbarth"
        title="Twitter"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-twitter text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://linkedin.com/in/jibÃ©-b-772884a3"
        title="Linkedin"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-linkedin text-gray-600 hover:text-black"></i>
    </a>
    <a
        href="https://connect.symfony.com/profile/jibbarth"
        title="Symfony"
        target="_blank"
        rel="nofollow,noopener">
        <i class="fab fa-symfony text-gray-600 hover:text-black"></i>
    </a>

                </div>
            </div>
        </footer>
                        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" rel="prefetch" crossorigin="anonymous"></script>
            <script src="/dist/runtime.js"></script><script src="/dist/1.js"></script><script src="/dist/app.js"></script>

                        <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-39521443-1"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                gtag('config', 'UA-39521443-1');
            </script>
                    
    <script src="/dist/runtime.js"></script><script src="/dist/0.js"></script><script src="/dist/gist.js"></script>
    </body>
</html>
